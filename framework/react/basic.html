<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/my-blog/css/index.css"><script language="javascript" type="text/javascript" src="/my-blog/js/MouseClickEffect.js"></script><title>React | William</title><meta name="description" content="William的博客">
    <link rel="modulepreload" href="/my-blog/assets/app.4bbb0959.js"><link rel="modulepreload" href="/my-blog/assets/basic.html.184f2c33.js"><link rel="modulepreload" href="/my-blog/assets/basic.html.ec84ed4d.js"><link rel="prefetch" href="/my-blog/assets/index.html.a7de8857.js"><link rel="prefetch" href="/my-blog/assets/background.html.cfadbc91.js"><link rel="prefetch" href="/my-blog/assets/basic.html.365fea19.js"><link rel="prefetch" href="/my-blog/assets/box-model.html.87c0a303.js"><link rel="prefetch" href="/my-blog/assets/data.html.cba8828f.js"><link rel="prefetch" href="/my-blog/assets/flex.html.b3061d48.js"><link rel="prefetch" href="/my-blog/assets/float.html.c910dcb7.js"><link rel="prefetch" href="/my-blog/assets/grid.html.7490621f.js"><link rel="prefetch" href="/my-blog/assets/keyframes.html.59ab7cde.js"><link rel="prefetch" href="/my-blog/assets/media.html.ffc2e2b4.js"><link rel="prefetch" href="/my-blog/assets/position.html.0f7aeb73.js"><link rel="prefetch" href="/my-blog/assets/priority.html.62fad651.js"><link rel="prefetch" href="/my-blog/assets/selector.html.65fcbf2d.js"><link rel="prefetch" href="/my-blog/assets/text.html.554dc9ee.js"><link rel="prefetch" href="/my-blog/assets/transform.html.8af46ffb.js"><link rel="prefetch" href="/my-blog/assets/transition.html.4fa18f65.js"><link rel="prefetch" href="/my-blog/assets/index.html.c434b54c.js"><link rel="prefetch" href="/my-blog/assets/index.html.7caeb920.js"><link rel="prefetch" href="/my-blog/assets/form-list.html.83308341.js"><link rel="prefetch" href="/my-blog/assets/link-img.html.21e38076.js"><link rel="prefetch" href="/my-blog/assets/structure.html.7ef1b5ba.js"><link rel="prefetch" href="/my-blog/assets/table-media.html.a4247c3f.js"><link rel="prefetch" href="/my-blog/assets/text.html.b4549b8f.js"><link rel="prefetch" href="/my-blog/assets/offer.html.0f04c825.js"><link rel="prefetch" href="/my-blog/assets/JPromise.html.3c5db6a1.js"><link rel="prefetch" href="/my-blog/assets/array.html.966a8bb3.js"><link rel="prefetch" href="/my-blog/assets/basic.html.b42b0d57.js"><link rel="prefetch" href="/my-blog/assets/canvas.html.66c13ac9.js"><link rel="prefetch" href="/my-blog/assets/class.html.fc715035.js"><link rel="prefetch" href="/my-blog/assets/closure.html.b278efe8.js"><link rel="prefetch" href="/my-blog/assets/dom.html.24d36d0b.js"><link rel="prefetch" href="/my-blog/assets/function.html.b6f0a7fe.js"><link rel="prefetch" href="/my-blog/assets/map.html.c6cc30ce.js"><link rel="prefetch" href="/my-blog/assets/module.html.0ae5f1c4.js"><link rel="prefetch" href="/my-blog/assets/object.html.d3767f0d.js"><link rel="prefetch" href="/my-blog/assets/promise.html.e240b08c.js"><link rel="prefetch" href="/my-blog/assets/prototype.html.7f7ebb40.js"><link rel="prefetch" href="/my-blog/assets/regexp.html.13671b83.js"><link rel="prefetch" href="/my-blog/assets/set.html.7dda1f78.js"><link rel="prefetch" href="/my-blog/assets/storage.html.e5783dc1.js"><link rel="prefetch" href="/my-blog/assets/symbol.html.d215c347.js"><link rel="prefetch" href="/my-blog/assets/task.html.279f73a6.js"><link rel="prefetch" href="/my-blog/assets/valueType.html.2f35a70c.js"><link rel="prefetch" href="/my-blog/assets/basic.html.9d0e7c81.js"><link rel="prefetch" href="/my-blog/assets/dataType.html.3ca051c4.js"><link rel="prefetch" href="/my-blog/assets/datetime.html.78a46bfc.js"><link rel="prefetch" href="/my-blog/assets/foreignKey.html.660b6387.js"><link rel="prefetch" href="/my-blog/assets/lock.html.7a88a67f.js"><link rel="prefetch" href="/my-blog/assets/multiple.html.1ebb6f8c.js"><link rel="prefetch" href="/my-blog/assets/statistics.html.728b25f7.js"><link rel="prefetch" href="/my-blog/assets/table.html.4e117843.js"><link rel="prefetch" href="/my-blog/assets/transaction.html.84c0ce0c.js"><link rel="prefetch" href="/my-blog/assets/algorithm.html.834dd9bb.js"><link rel="prefetch" href="/my-blog/assets/daily.html.3730e2a7.js"><link rel="prefetch" href="/my-blog/assets/manual.html.00f6b48d.js"><link rel="prefetch" href="/my-blog/assets/module.html.49c9fc81.js"><link rel="prefetch" href="/my-blog/assets/git.html.f4f4f051.js"><link rel="prefetch" href="/my-blog/assets/http.html.8ebbc6c6.js"><link rel="prefetch" href="/my-blog/assets/tmux.html.658fd5bd.js"><link rel="prefetch" href="/my-blog/assets/chapter1.html.50cc83f4.js"><link rel="prefetch" href="/my-blog/assets/chapter2.html.2077b1e9.js"><link rel="prefetch" href="/my-blog/assets/chapter3.html.2049d4af.js"><link rel="prefetch" href="/my-blog/assets/chapter4.html.3a370be6.js"><link rel="prefetch" href="/my-blog/assets/chapter5.html.bbd2a06e.js"><link rel="prefetch" href="/my-blog/assets/chapter6.html.8c0c4886.js"><link rel="prefetch" href="/my-blog/assets/chapter10.html.1182bb94.js"><link rel="prefetch" href="/my-blog/assets/chapter11.html.8e257d0a.js"><link rel="prefetch" href="/my-blog/assets/chapter7.html.23a75e7e.js"><link rel="prefetch" href="/my-blog/assets/chapter8.html.9e5fed04.js"><link rel="prefetch" href="/my-blog/assets/chapter9.html.276f674f.js"><link rel="prefetch" href="/my-blog/assets/chapter12.html.cee34393.js"><link rel="prefetch" href="/my-blog/assets/chapter13.html.ff23f30a.js"><link rel="prefetch" href="/my-blog/assets/chapter14.html.209c55fd.js"><link rel="prefetch" href="/my-blog/assets/note.html.16694b3c.js"><link rel="prefetch" href="/my-blog/assets/redux.html.f2c78eed.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.2915eb2f.js"><link rel="prefetch" href="/my-blog/assets/animation.html.99c2166b.js"><link rel="prefetch" href="/my-blog/assets/basic.html.e8a81792.js"><link rel="prefetch" href="/my-blog/assets/book.html.7de635a8.js"><link rel="prefetch" href="/my-blog/assets/compositionApi.html.a9e85ba9.js"><link rel="prefetch" href="/my-blog/assets/vue.html.b9d4423b.js"><link rel="prefetch" href="/my-blog/assets/index.html.7376b2ba.js"><link rel="prefetch" href="/my-blog/assets/basic.html.06b7944a.js"><link rel="prefetch" href="/my-blog/assets/step-2.html.e4dfc14a.js"><link rel="prefetch" href="/my-blog/assets/step-3.html.a139e6ac.js"><link rel="prefetch" href="/my-blog/assets/step-4.html.a7e1a3da.js"><link rel="prefetch" href="/my-blog/assets/step-5.html.2663f325.js"><link rel="prefetch" href="/my-blog/assets/basic.html.f96e9ec0.js"><link rel="prefetch" href="/my-blog/assets/express.html.b9dd30a1.js"><link rel="prefetch" href="/my-blog/assets/final.html.2664159b.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.8f79dba9.js"><link rel="prefetch" href="/my-blog/assets/basic.html.bc0f2914.js"><link rel="prefetch" href="/my-blog/assets/final.html.20f2cff9.js"><link rel="prefetch" href="/my-blog/assets/note.html.b8eca5f9.js"><link rel="prefetch" href="/my-blog/assets/404.html.265028f6.js"><link rel="prefetch" href="/my-blog/assets/index.html.7c6c7785.js"><link rel="prefetch" href="/my-blog/assets/background.html.4e34aa41.js"><link rel="prefetch" href="/my-blog/assets/basic.html.06b77917.js"><link rel="prefetch" href="/my-blog/assets/box-model.html.439d8adc.js"><link rel="prefetch" href="/my-blog/assets/data.html.a65b5935.js"><link rel="prefetch" href="/my-blog/assets/flex.html.efd52128.js"><link rel="prefetch" href="/my-blog/assets/float.html.260b5036.js"><link rel="prefetch" href="/my-blog/assets/grid.html.cdc7ce25.js"><link rel="prefetch" href="/my-blog/assets/keyframes.html.060cc148.js"><link rel="prefetch" href="/my-blog/assets/media.html.9ddc4192.js"><link rel="prefetch" href="/my-blog/assets/position.html.074a15cf.js"><link rel="prefetch" href="/my-blog/assets/priority.html.d371ff9f.js"><link rel="prefetch" href="/my-blog/assets/selector.html.bbc1f562.js"><link rel="prefetch" href="/my-blog/assets/text.html.a0a67016.js"><link rel="prefetch" href="/my-blog/assets/transform.html.3f140a45.js"><link rel="prefetch" href="/my-blog/assets/transition.html.09ccb518.js"><link rel="prefetch" href="/my-blog/assets/index.html.f3d45f39.js"><link rel="prefetch" href="/my-blog/assets/index.html.2763ec89.js"><link rel="prefetch" href="/my-blog/assets/form-list.html.93d0fb9d.js"><link rel="prefetch" href="/my-blog/assets/link-img.html.e3d512cc.js"><link rel="prefetch" href="/my-blog/assets/structure.html.2cb32189.js"><link rel="prefetch" href="/my-blog/assets/table-media.html.6328f9ed.js"><link rel="prefetch" href="/my-blog/assets/text.html.02d4e9e9.js"><link rel="prefetch" href="/my-blog/assets/offer.html.222a5c15.js"><link rel="prefetch" href="/my-blog/assets/JPromise.html.d6f62823.js"><link rel="prefetch" href="/my-blog/assets/array.html.a8eee129.js"><link rel="prefetch" href="/my-blog/assets/basic.html.85aa812f.js"><link rel="prefetch" href="/my-blog/assets/canvas.html.1202cafd.js"><link rel="prefetch" href="/my-blog/assets/class.html.802ae6b4.js"><link rel="prefetch" href="/my-blog/assets/closure.html.056cb5e8.js"><link rel="prefetch" href="/my-blog/assets/dom.html.856633da.js"><link rel="prefetch" href="/my-blog/assets/function.html.e2af5f0e.js"><link rel="prefetch" href="/my-blog/assets/map.html.36b71573.js"><link rel="prefetch" href="/my-blog/assets/module.html.dbbfcd77.js"><link rel="prefetch" href="/my-blog/assets/object.html.d2ef4498.js"><link rel="prefetch" href="/my-blog/assets/promise.html.cc01c2fc.js"><link rel="prefetch" href="/my-blog/assets/prototype.html.3b39278f.js"><link rel="prefetch" href="/my-blog/assets/regexp.html.07e4d142.js"><link rel="prefetch" href="/my-blog/assets/set.html.cd1064e7.js"><link rel="prefetch" href="/my-blog/assets/storage.html.ca6a8c1e.js"><link rel="prefetch" href="/my-blog/assets/symbol.html.6fc08621.js"><link rel="prefetch" href="/my-blog/assets/task.html.994f424a.js"><link rel="prefetch" href="/my-blog/assets/valueType.html.2bdc9090.js"><link rel="prefetch" href="/my-blog/assets/basic.html.72e5f0af.js"><link rel="prefetch" href="/my-blog/assets/dataType.html.68029a1f.js"><link rel="prefetch" href="/my-blog/assets/datetime.html.b2864b69.js"><link rel="prefetch" href="/my-blog/assets/foreignKey.html.764fc535.js"><link rel="prefetch" href="/my-blog/assets/lock.html.172942c4.js"><link rel="prefetch" href="/my-blog/assets/multiple.html.dc26c9d8.js"><link rel="prefetch" href="/my-blog/assets/statistics.html.5e3a2e34.js"><link rel="prefetch" href="/my-blog/assets/table.html.15c5a514.js"><link rel="prefetch" href="/my-blog/assets/transaction.html.9f25b42a.js"><link rel="prefetch" href="/my-blog/assets/algorithm.html.09254f7e.js"><link rel="prefetch" href="/my-blog/assets/daily.html.c9479c81.js"><link rel="prefetch" href="/my-blog/assets/manual.html.e68606ff.js"><link rel="prefetch" href="/my-blog/assets/module.html.c646bb23.js"><link rel="prefetch" href="/my-blog/assets/git.html.468c26df.js"><link rel="prefetch" href="/my-blog/assets/http.html.4a31545c.js"><link rel="prefetch" href="/my-blog/assets/tmux.html.0a956fa3.js"><link rel="prefetch" href="/my-blog/assets/chapter1.html.f3c6c91f.js"><link rel="prefetch" href="/my-blog/assets/chapter2.html.f3fee6e1.js"><link rel="prefetch" href="/my-blog/assets/chapter3.html.343fc6cc.js"><link rel="prefetch" href="/my-blog/assets/chapter4.html.d3ea6484.js"><link rel="prefetch" href="/my-blog/assets/chapter5.html.0d7f107f.js"><link rel="prefetch" href="/my-blog/assets/chapter6.html.16b30a38.js"><link rel="prefetch" href="/my-blog/assets/chapter10.html.acc90bd9.js"><link rel="prefetch" href="/my-blog/assets/chapter11.html.2cdc1712.js"><link rel="prefetch" href="/my-blog/assets/chapter7.html.fdc8f349.js"><link rel="prefetch" href="/my-blog/assets/chapter8.html.50829096.js"><link rel="prefetch" href="/my-blog/assets/chapter9.html.afaadb3a.js"><link rel="prefetch" href="/my-blog/assets/chapter12.html.4a7c8938.js"><link rel="prefetch" href="/my-blog/assets/chapter13.html.1a4647a6.js"><link rel="prefetch" href="/my-blog/assets/chapter14.html.da970347.js"><link rel="prefetch" href="/my-blog/assets/note.html.1bcac050.js"><link rel="prefetch" href="/my-blog/assets/redux.html.b3c33c99.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.0cade711.js"><link rel="prefetch" href="/my-blog/assets/animation.html.ef0e7d95.js"><link rel="prefetch" href="/my-blog/assets/basic.html.ed7d3874.js"><link rel="prefetch" href="/my-blog/assets/book.html.c68d8809.js"><link rel="prefetch" href="/my-blog/assets/compositionApi.html.458b8908.js"><link rel="prefetch" href="/my-blog/assets/vue.html.916610b1.js"><link rel="prefetch" href="/my-blog/assets/index.html.4eab5758.js"><link rel="prefetch" href="/my-blog/assets/basic.html.9ab8b156.js"><link rel="prefetch" href="/my-blog/assets/step-2.html.cbd8493e.js"><link rel="prefetch" href="/my-blog/assets/step-3.html.c1b63356.js"><link rel="prefetch" href="/my-blog/assets/step-4.html.7f689ce5.js"><link rel="prefetch" href="/my-blog/assets/step-5.html.cd6d1d49.js"><link rel="prefetch" href="/my-blog/assets/basic.html.30e5fe9f.js"><link rel="prefetch" href="/my-blog/assets/express.html.892bfa72.js"><link rel="prefetch" href="/my-blog/assets/final.html.1cec4f5e.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.e5f34d70.js"><link rel="prefetch" href="/my-blog/assets/basic.html.bc406685.js"><link rel="prefetch" href="/my-blog/assets/final.html.feb5a6e1.js"><link rel="prefetch" href="/my-blog/assets/note.html.6a93b4a2.js"><link rel="prefetch" href="/my-blog/assets/404.html.490f2572.js"><link rel="prefetch" href="/my-blog/assets/404.214c3824.js"><link rel="prefetch" href="/my-blog/assets/Layout.3c062dfa.js"><link rel="prefetch" href="/my-blog/assets/svgAnimate1.6521df25.js"><link rel="prefetch" href="/my-blog/assets/test.0ee0aaf8.js">
    <link rel="stylesheet" href="/my-blog/assets/style.2ec95b24.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/my-blog/" class=""><img class="logo" src="/my-blog/avater.png" alt="William"><span class="site-name can-hide">William</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/basic" class="" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/valueType" class="" aria-label="基本类型"><!--[--><!--]--> 基本类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/array" class="" aria-label="数组类型"><!--[--><!--]--> 数组类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/symbol" class="" aria-label="Symbol"><!--[--><!--]--> Symbol <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/set" class="" aria-label="Set"><!--[--><!--]--> Set <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/map" class="" aria-label="Map"><!--[--><!--]--> Map <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/function" class="" aria-label="函数进阶"><!--[--><!--]--> 函数进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/closure" class="" aria-label="作用域与闭包"><!--[--><!--]--> 作用域与闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/object" class="" aria-label="对象"><!--[--><!--]--> 对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/prototype" class="" aria-label="原型与继承"><!--[--><!--]--> 原型与继承 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/class" class="" aria-label="class"><!--[--><!--]--> class <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/module" class="" aria-label="模块设计"><!--[--><!--]--> 模块设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/regexp" class="" aria-label="正则表达式"><!--[--><!--]--> 正则表达式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/promise" class="" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/task" class="" aria-label="任务管理"><!--[--><!--]--> 任务管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/JPromise" class="" aria-label="Promise核心"><!--[--><!--]--> Promise核心 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/dom" class="" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/canvas" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/note" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/advanced" class="" aria-label="语法进阶"><!--[--><!--]--> 语法进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/final" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>爬虫实现</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/basic" class="" aria-label="爬虫工具"><!--[--><!--]--> 爬虫工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/express" class="" aria-label="Express"><!--[--><!--]--> Express <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/final" class="" aria-label="项目改良"><!--[--><!--]--> 项目改良 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/compositionApi" class="" aria-label="Composition API"><!--[--><!--]--> Composition API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/animation" class="" aria-label="动画"><!--[--><!--]--> 动画 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/advanced" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/vue" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/book" class="" aria-label="VueJs深入浅出"><!--[--><!--]--> VueJs深入浅出 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React Js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/basic" class="router-link-active" aria-label="React基础"><!--[--><!--]--> React基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/redux" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/note" class="" aria-label="笔记"><!--[--><!--]--> 笔记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/my-blog/tools/tmux" class="" aria-label="tmux"><!--[--><!--]--> tmux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/http" class="" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack4.0</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/basic" class="" aria-label="基本概念"><!--[--><!--]--> 基本概念 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-2" class="" aria-label="起步介绍"><!--[--><!--]--> 起步介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-3" class="" aria-label="打包配置"><!--[--><!--]--> 打包配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-4" class="" aria-label="进阶"><!--[--><!--]--> 进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-5" class="" aria-label="配置案例"><!--[--><!--]--> 配置案例 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/my-blog/interview/offer" class="" aria-label="剑指offer"><!--[--><!--]--> 剑指offer <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/basic" class="" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/valueType" class="" aria-label="基本类型"><!--[--><!--]--> 基本类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/array" class="" aria-label="数组类型"><!--[--><!--]--> 数组类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/symbol" class="" aria-label="Symbol"><!--[--><!--]--> Symbol <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/set" class="" aria-label="Set"><!--[--><!--]--> Set <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/map" class="" aria-label="Map"><!--[--><!--]--> Map <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/function" class="" aria-label="函数进阶"><!--[--><!--]--> 函数进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/closure" class="" aria-label="作用域与闭包"><!--[--><!--]--> 作用域与闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/object" class="" aria-label="对象"><!--[--><!--]--> 对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/prototype" class="" aria-label="原型与继承"><!--[--><!--]--> 原型与继承 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/class" class="" aria-label="class"><!--[--><!--]--> class <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/module" class="" aria-label="模块设计"><!--[--><!--]--> 模块设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/regexp" class="" aria-label="正则表达式"><!--[--><!--]--> 正则表达式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/promise" class="" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/task" class="" aria-label="任务管理"><!--[--><!--]--> 任务管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/JPromise" class="" aria-label="Promise核心"><!--[--><!--]--> Promise核心 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/dom" class="" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/canvas" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/note" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/advanced" class="" aria-label="语法进阶"><!--[--><!--]--> 语法进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/final" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>爬虫实现</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/basic" class="" aria-label="爬虫工具"><!--[--><!--]--> 爬虫工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/express" class="" aria-label="Express"><!--[--><!--]--> Express <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/final" class="" aria-label="项目改良"><!--[--><!--]--> 项目改良 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/compositionApi" class="" aria-label="Composition API"><!--[--><!--]--> Composition API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/animation" class="" aria-label="动画"><!--[--><!--]--> 动画 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/advanced" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/vue" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/book" class="" aria-label="VueJs深入浅出"><!--[--><!--]--> VueJs深入浅出 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React Js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/basic" class="router-link-active" aria-label="React基础"><!--[--><!--]--> React基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/redux" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/note" class="" aria-label="笔记"><!--[--><!--]--> 笔记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/my-blog/tools/tmux" class="" aria-label="tmux"><!--[--><!--]--> tmux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/http" class="" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack4.0</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/basic" class="" aria-label="基本概念"><!--[--><!--]--> 基本概念 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-2" class="" aria-label="起步介绍"><!--[--><!--]--> 起步介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-3" class="" aria-label="打包配置"><!--[--><!--]--> 打包配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-4" class="" aria-label="进阶"><!--[--><!--]--> 进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-5" class="" aria-label="配置案例"><!--[--><!--]--> 配置案例 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/my-blog/interview/offer" class="" aria-label="剑指offer"><!--[--><!--]--> 剑指offer <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">React.js <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/basic.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/basic.html#this" class="router-link-active router-link-exact-active sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/basic.html#官方" class="router-link-active router-link-exact-active sidebar-item" aria-label="官方"><!--[--><!--]--> 官方 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#理解" class="router-link-active router-link-exact-active sidebar-item" aria-label="理解"><!--[--><!--]--> 理解 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#基础" class="router-link-active router-link-exact-active sidebar-item" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/basic.html#pwa" class="router-link-active router-link-exact-active sidebar-item" aria-label="PWA"><!--[--><!--]--> PWA <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#class-component" class="router-link-active router-link-exact-active sidebar-item" aria-label="class component"><!--[--><!--]--> class component <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#reactdom-render" class="router-link-active router-link-exact-active sidebar-item" aria-label="ReactDOM.render"><!--[--><!--]--> ReactDOM.render <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#jsx-语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="JSX 语法"><!--[--><!--]--> JSX 语法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#immutable" class="router-link-active router-link-exact-active sidebar-item" aria-label="immutable"><!--[--><!--]--> immutable <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#拆分组件和组件传值" class="router-link-active router-link-exact-active sidebar-item" aria-label="拆分组件和组件传值"><!--[--><!--]--> 拆分组件和组件传值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#进阶" class="router-link-active router-link-exact-active sidebar-item" aria-label="进阶"><!--[--><!--]--> 进阶 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/basic.html#proptypes-与-defaultprops" class="router-link-active router-link-exact-active sidebar-item" aria-label="PropTypes 与 DefaultProps"><!--[--><!--]--> PropTypes 与 DefaultProps <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#props、state-与-render-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="Props、State 与 render 函数"><!--[--><!--]--> Props、State 与 render 函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#什么是虚拟-dom" class="router-link-active router-link-exact-active sidebar-item" aria-label="什么是虚拟 DOM"><!--[--><!--]--> 什么是虚拟 DOM <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#虚拟-dom-深入" class="router-link-active router-link-exact-active sidebar-item" aria-label="虚拟 DOM 深入"><!--[--><!--]--> 虚拟 DOM 深入 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#虚拟-dom-中的-diff-算法" class="router-link-active router-link-exact-active sidebar-item" aria-label="虚拟 DOM 中的 diff 算法"><!--[--><!--]--> 虚拟 DOM 中的 diff 算法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#react-中-ref-的使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="React 中 ref 的使用"><!--[--><!--]--> React 中 ref 的使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#生命周期函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期函数"><!--[--><!--]--> 生命周期函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#生命周期函数的使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期函数的使用"><!--[--><!--]--> 生命周期函数的使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#charles-数据-mock" class="router-link-active router-link-exact-active sidebar-item" aria-label="Charles 数据 mock"><!--[--><!--]--> Charles 数据 mock <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#react-中的-css-动画" class="router-link-active router-link-exact-active sidebar-item" aria-label="React 中的 css 动画"><!--[--><!--]--> React 中的 css 动画 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/basic.html#react-transition-group" class="router-link-active router-link-exact-active sidebar-item" aria-label="react-transition-group"><!--[--><!--]--> react-transition-group <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/my-blog/framework/react/redux.html" class="sidebar-item" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a><!----></li><li><a href="/my-blog/framework/react/note.html" class="sidebar-item" aria-label="Note"><!--[--><!--]--> Note <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="react" tabindex="-1"><a class="header-anchor" href="#react" aria-hidden="true">#</a> React</h1><h2 id="this" tabindex="-1"><a class="header-anchor" href="#this" aria-hidden="true">#</a> this</h2><h3 id="官方" tabindex="-1"><a class="header-anchor" href="#官方" aria-hidden="true">#</a> 官方</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Toggle</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">isToggleOn</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 为了在回调中使用 `this`，这个绑定是必不可少的</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isToggleOn</span><span class="token operator">:</span> <span class="token operator">!</span>state<span class="token punctuation">.</span>isToggleOn<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isToggleOn <span class="token operator">?</span> <span class="token string">&#39;ON&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;OFF&#39;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Toggle <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你必须谨慎对待 JSX 回调函数中的 <code>this</code>，在 JavaScript 中，class 的方法默认不会绑定 <code>this</code>。如果你忘记绑定 <code>this.handleClick</code> 并把它传入了 <code>onClick</code>，当你调用这个函数的时候 <code>this</code> 的值为 <code>undefined</code>。</p><p>这并不是 React 特有的行为；这其实与 JavaScript 函数工作原理有关。通常情况下，如果你没有在方法后面添加 <code>()</code>，例如 <code>onClick={this.handleClick}</code>，你应该为这个方法绑定 <code>this</code>。</p><h3 id="理解" tabindex="-1"><a class="header-anchor" href="#理解" aria-hidden="true">#</a> 理解</h3><div class="language-html ext-html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// window</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>按钮<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-container tip"><p class="custom-container-title">this</p><p>JSX 语法中的 this 指向当前组件</p></div><ul><li><p>JSX 中的 this 执行当前 Reack 组件,所以 onClick = { this.handleClick }可以拿到当前组件的函数</p></li><li><p>class 定义中，当定义 React 组件时，<code>extends React.Component</code>时，不会将<code>this</code>继承下来。所以 handClick 函数中如果使用<code>this</code>是<code>undefined</code>。 以下两种方式可以指定<code>this</code>:</p><ol><li><code>this.handleClick = this.handleClick.bind(this)</code> ，推荐这种在构造函数绑定的方式</li><li><code>&lt;button onClick={this.handleClick.bind(this)}&gt;&lt;/button&gt;</code></li></ol></li><li><p>ES6 中的 arrow function，默认在定义的时候会绑定<code>this</code>, 指向了当前事件触发的上下文</p><p><code>&lt;div onScroll={ ()=&gt; {this.scroll() } } className=&quot;field-wrap&quot;&gt;&lt;/div&gt;</code></p></li></ul><h2 id="基础" tabindex="-1"><a class="header-anchor" href="#基础" aria-hidden="true">#</a> 基础</h2><h3 id="pwa" tabindex="-1"><a class="header-anchor" href="#pwa" aria-hidden="true">#</a> PWA</h3><div class="custom-container tip"><p class="custom-container-title">progressive web application</p><p>在 https 协议的服务器上，在用户二次访问网页的，即使是断网也能够访问，serviceWorker 能够缓存网页</p></div><div class="custom-container tip"><p class="custom-container-title">mainfest.json</p><p>如果配置了 pwa 设置，那么便可以把网页创建一个桌面快捷方式进行访问</p></div><p>icons src 设置了桌面快捷图标的 icon</p><div class="language-json ext-json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;short_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;React App&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Create React App Sample&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;icons&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;favicon.ico&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sizes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;64x64 32x32 24x24 16x16&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;image/x-icon&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;logo192.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sizes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;192x192&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;logo512.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;image/png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sizes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;512x512&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;start_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;display&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standalone&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;theme_color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;background_color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ffffff&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="class-component" tabindex="-1"><a class="header-anchor" href="#class-component" aria-hidden="true">#</a> class component</h3><p>render 函数返回 JSX</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello world<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><h3 id="reactdom-render" tabindex="-1"><a class="header-anchor" href="#reactdom-render" aria-hidden="true">#</a> ReactDOM.render</h3><ul><li>ReactDOM 的 render 方法能够实现将一个 React 组件挂载到 DOM 节点上</li><li>ReactDOM 展示组件内容的时候，<code>&lt;App /&gt;</code>使用了 JSX 语法，必需引入 React，才能进行编译</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token comment">// JSX</span>
  <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="jsx-语法" tabindex="-1"><a class="header-anchor" href="#jsx-语法" aria-hidden="true">#</a> JSX 语法</h3><ul><li><p>JSX 语法直接写标签，不需要引号包裹</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello world..</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>JSX 语法中的标签不仅可以是<strong>原生标签</strong>，也可以使用<strong>组件</strong>，组件开头必需<strong>大写字母</strong>开头<code>&lt;App /&gt;</code>，Fragment 也是一个组件</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 大写字母开头</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul><ul><li><p>JSX 注释</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token comment">/* 开发模式下的注释，不会显示在页面上 */</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token punctuation">{</span>
  <span class="token comment">//单行注释要把花括号单独放一行</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>引入和添加 class, for 等属性</p><div class="custom-container tip"><p class="custom-container-title">关键字</p><p>class 使用 className, for 使用 htmlFor</p></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">htmlFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertArea<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">输入内容</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertArea<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span>
    <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div></li><li><p>innerHtml</p><p>外层花括号表示 JSX 语法，内层花括号表示接受一个对象</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span>
  <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span>
  <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleItemDelete</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">dangerouslySetInnerHTML</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">__html</span><span class="token operator">:</span> item <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul><h3 id="immutable" tabindex="-1"><a class="header-anchor" href="#immutable" aria-hidden="true">#</a> immutable</h3><div class="custom-container tip"><p class="custom-container-title">immutable</p><p>react 建议 state 不允许我们做任何的改变（直接改变会影响性能）</p><p>可以考虑拷贝一个副本, 然后操作赋值 [...this.state.list] ）</p></div><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token function">handleItemDelete</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">]</span>  <span class="token comment">// 拷贝</span>
    list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> list
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="拆分组件和组件传值" tabindex="-1"><a class="header-anchor" href="#拆分组件和组件传值" aria-hidden="true">#</a> 拆分组件和组件传值</h3><div class="custom-container tip"><p class="custom-container-title">组件</p><p>在 constructor 里面做 this 统一绑定，会比在 jsx 中绑定的性能好</p><p>父组件通过属性向子组件传值，子组件通过 props 接收</p><p>子组件通过属性获取父组件方法，调用向外传递事件（父组件在传递方法时, 要记得绑定父组件的 this）</p><p>setState 可以传递一个函数实现异步，并且带来性能提升，函数参数 prevState(修改之前的 state)</p></div><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token comment">// TodoList.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TodoItem <span class="token keyword">from</span> <span class="token string">&#39;./TodoItem&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleBtnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleItemDelete <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleItemDelete</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">htmlFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertArea<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">输入内容</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
            <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertArea<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span>
            <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTodoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getTodoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TodoItem</span></span>
          <span class="token attr-name">content</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span></span>
          <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span>
          <span class="token attr-name">index</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span>
          <span class="token attr-name">deleteItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleItemDelete<span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">inputValue</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>prevState<span class="token punctuation">.</span>list<span class="token punctuation">,</span> prevState<span class="token punctuation">.</span>inputValue<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleItemDelete</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>prevState<span class="token punctuation">.</span>list<span class="token punctuation">]</span><span class="token punctuation">;</span>
      list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token comment">// TodoItem.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoItem</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> content <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> deleteItem<span class="token punctuation">,</span> index <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token function">deleteItem</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoItem<span class="token punctuation">;</span>
</code></pre></div><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><div class="custom-container tip"><p class="custom-container-title">思考</p><ul><li><p>命名式开发: 直接操作 dom（jQuery、原生），声名式开发: 面向数据编程（React）</p></li><li><p>可以与其它框架并存，React 只影响其绑定的原生 dom 标签下的区域</p></li><li><p>组件化（React 的组件首字母大写，属性传值，方法传递）</p></li><li><p>单向数据流，子组件不允许改变父组件的值（只读，当数据被多个子组件共用且允许被子组件改变数据时，会导致维护困难）</p></li><li><p>视图层框架（需要 redux 等其它辅助状态管理）</p></li><li><p>函数式编程（有利于单元测试）</p></li></ul></div><h2 id="进阶" tabindex="-1"><a class="header-anchor" href="#进阶" aria-hidden="true">#</a> 进阶</h2><h3 id="proptypes-与-defaultprops" tabindex="-1"><a class="header-anchor" href="#proptypes-与-defaultprops" aria-hidden="true">#</a> PropTypes 与 DefaultProps</h3><ul><li><p>使用</p><p>实现<strong>类型校验</strong>(开发环境下的 warning)</p></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&#39;prop-types&#39;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoItem</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

TodoItem<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span><span class="token function">oneOfType</span><span class="token punctuation">(</span><span class="token punctuation">[</span>PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">,</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">deleteItem</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func
    <span class="token literal-property property">index</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoItem
</code></pre></div><p>isRequired 实现必传<code>test: PropTypes.string.isRequired</code></p><div class="language-bash ext-sh"><pre class="language-bash"><code>Warning: Failed prop type: The prop <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">test</span><span class="token variable">`</span></span> is marked as required <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span>TodoItem<span class="token variable">`</span></span>, but its value is <span class="token variable"><span class="token variable">`</span>undefined<span class="token variable">`</span></span><span class="token builtin class-name">.</span>
</code></pre></div><ul><li>使用 defaultProps<strong>提供默认值</strong>(例如在 isRequired 下)</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code>TodoItem<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="props、state-与-render-函数" tabindex="-1"><a class="header-anchor" href="#props、state-与-render-函数" aria-hidden="true">#</a> Props、State 与 render 函数</h3><ul><li>当组件当中的 Props 或者 State 发生改变的时候，会触发 render 函数重新执行</li><li>当父组件的 render 函数被运行时，它的子组件的 render 都将被重新执行</li></ul><h3 id="什么是虚拟-dom" tabindex="-1"><a class="header-anchor" href="#什么是虚拟-dom" aria-hidden="true">#</a> 什么是虚拟 DOM</h3><h4 id="方案-1" tabindex="-1"><a class="header-anchor" href="#方案-1" aria-hidden="true">#</a> 方案 1</h4><ol><li>state 数据</li><li>模板 （render 函数中返回的 JSX）</li><li>数据 + 模板 = 真实的 DOM 显示</li><li>state 发生改变</li><li>数据 + 模板 = 真实的 DOM，替换原始的 DOM</li></ol><div class="custom-container warning"><p class="custom-container-title">缺陷</p><ul><li>第一次生成了一个完整的 DOM 片段</li><li>第二次生成了一个完整的 DOM 片段</li><li>第二次生成的 DOM 替换第一次的 DOM，非常耗性能</li></ul></div><h4 id="方案-2" tabindex="-1"><a class="header-anchor" href="#方案-2" aria-hidden="true">#</a> 方案 2</h4><ol><li>state 数据</li><li>JSX 模板</li><li>数据 + 模板 结合，生成真实的 DOM，来显示</li><li>state 发生改变</li><li>数据 + 模板 结合，生成真实的 DOM，并不直接替换原始的 DOM</li><li>新的 DOM（DocumentFragment 文档碎片）和原始的 DOM 做对比，找差异、</li><li>找出 input 框发生了变化</li><li>只用新的 DOM 中的 input 元素，替换掉老的 DOM 中的 input 元素</li></ol><div class="custom-container tip"><p class="custom-container-title">结果</p><ul><li>只修改部分 DOM 元素节约了一部分性能</li><li>对比 DOM 的过程又损耗了一部分性能</li><li>性能提升并不明显</li></ul></div><h4 id="方案-3" tabindex="-1"><a class="header-anchor" href="#方案-3" aria-hidden="true">#</a> 方案 3</h4><ol><li><p>state 数据</p></li><li><p>JSX 模板</p></li><li><p>数据 + 模板 结合，生成真实的 DOM，来显示</p><p><code>&lt;div id=&#39;abc&#39;&gt;&lt;span&gt;hello world&lt;/span&gt;&lt;/div&gt;</code></p></li><li><p>生成虚拟 DOM（虚拟 DOM 是一个数组结构的对象，用它开描述真实 DOM）</p><p><code>[&#39;div&#39;,{id:&#39;abc&#39;},[&#39;span&#39;,{},&#39;hello world&#39;]]</code></p></li><li><p>state 发生变化</p></li><li><p>生成新的虚拟 DOM</p><p><code>[&#39;div&#39;,{id:&#39;abc&#39;},[&#39;span&#39;,{},&#39;bye bye&#39;]]</code></p></li><li><p>比较原始虚拟 DOM 和新的虚拟 DOM 的区别，找到区别是 span 中的内容</p></li><li><p>直接操作 DOM，改变 span 中的内容</p></li></ol><div class="custom-container tip"><p class="custom-container-title">优化</p><ul><li>第 4 步，生成虚拟 DOM 损耗了一些性能，但是生成 JS 对象的虚拟 DOM 与生成真实 DOM 的损耗相比是很小的（js 创建 js 对象很简单，创建 DOM 的时候需要调用 WebApplication 级别的 API 的损耗就比较大）</li><li>第 6 步生成虚拟 DOM 对比方案 2 第 5 步生成 DOM 极大提升了性能</li><li>第 7 步比较 JS 对象，和真实 DOM 的对比也极大提升了性能</li></ul></div><h3 id="虚拟-dom-深入" tabindex="-1"><a class="header-anchor" href="#虚拟-dom-深入" aria-hidden="true">#</a> 虚拟 DOM 深入</h3><ul><li><p>react 的实现是在生成虚拟 DOM 后才生成真实 DOM</p></li><li><p>JSX =&gt; createElement =&gt; 虚拟 DOM（JS 对象） =&gt; 真实的 DOM</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
    <span class="token comment">// return React.createElement(&#39;div&#39;, {}, &#39;item&#39;)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><ol><li><p>state 数据</p></li><li><p>JSX 模板</p></li><li><p>生成虚拟 DOM（虚拟 DOM 是一个数组结构的对象，用它开描述真实 DOM）</p><p><code>[&#39;div&#39;,{id:&#39;abc&#39;},[&#39;span&#39;,{},&#39;hello world&#39;]]</code></p></li><li><p>通过虚拟 DOM 来生成真实的 DOM，来显示</p><p><code>&lt;div id=&#39;abc&#39;&gt;&lt;span&gt;hello world&lt;/span&gt;&lt;/div&gt;</code></p></li><li><p>state 发生变化</p></li><li><p>生成新的虚拟 DOM</p><p><code>[&#39;div&#39;,{id:&#39;abc&#39;},[&#39;span&#39;,{},&#39;bye bye&#39;]]</code></p></li><li><p>比较原始虚拟 DOM 和新的虚拟 DOM 的区别，找到区别是 span 中的内容</p></li><li><p>直接操作 DOM，改变 span 中的内容</p></li></ol><div class="custom-container tip"><p class="custom-container-title">虚拟 DOM 的优点</p><ul><li><p>性能提升</p></li><li><p>跨端应用得以实现。React Native</p><p>DOM 只存在于浏览器，虚拟 DOM 作为 JS 对象在原生应用和浏览器都可以复用</p></li></ul></div><h3 id="虚拟-dom-中的-diff-算法" tabindex="-1"><a class="header-anchor" href="#虚拟-dom-中的-diff-算法" aria-hidden="true">#</a> 虚拟 DOM 中的 diff 算法</h3><p>比较虚拟 DOM 区别的算法（第 7 步）</p><ul><li><p>setState 作为异步函数提供了多个 state 更新（很短间隔时间内）只执行一次 setState，一次虚拟 DOM 的比对提升性能</p><p><img src="https://raw.githubusercontent.com/caffreygo/static/main/blog/react/diff.png" alt=""></p></li><li><p>同级比较，两个虚拟 DOM 的比对首先是同级的比对，第一层、第二层......如果有一级不同则不再比较，直接替换后面的全部 DOM。（虽然可能会造成 DOM 渲染的浪费，但是大大减少了两个虚拟 DOM 之间对比算法的性能损耗）</p></li><li><p>每个虚拟 DOM 节点的比较通过 key 值做关联（比较性能提升的前提，要保证前后虚拟 DOM 前后的 key 值一致，如果使用 index 作为 key 值就无法保证前后 key 值的一致，失去了 key 值存在的意义）</p><p><img src="https://raw.githubusercontent.com/caffreygo/static/main/blog/react/key.PNG" alt=""></p></li></ul><h3 id="react-中-ref-的使用" tabindex="-1"><a class="header-anchor" href="#react-中-ref-的使用" aria-hidden="true">#</a> React 中 ref 的使用</h3><h4 id="dom-获取" tabindex="-1"><a class="header-anchor" href="#dom-获取" aria-hidden="true">#</a> DOM 获取</h4><p>（在 React 中除了 e.target 可以获取到 DOM 元素之外，ref 也可以）</p><p>ref 参数等于一个函数(箭头函数传递 this)，如下我们构建了一个 ref 的引用（this.inopt），指向 input 这个节点</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertArea<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>input <span class="token operator">=</span> input<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span>
  <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span>
<span class="token comment">// this.input === &lt;input id=&quot;insertArea&quot; class=&quot;input&quot; value&gt;</span>
</code></pre></div><h4 id="setstate-异步问题" tabindex="-1"><a class="header-anchor" href="#setstate-异步问题" aria-hidden="true">#</a> setState 异步问题</h4><ul><li><p>ref 与 setState 共同使用可能出现的问题，setState 是异步函数不会立即执行</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token comment">// jsx</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">ul</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ul <span class="token operator">=</span> ul <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTodoItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">// click event</span>
      <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>prevState<span class="token punctuation">.</span>list<span class="token punctuation">,</span> prevState<span class="token punctuation">.</span>inputValue<span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ul<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;li&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
</code></pre></div></li></ul><p><img src="https://raw.githubusercontent.com/caffreygo/static/main/blog/react/ref.png" alt=""></p><ul><li><p>如果希望在 setState 后获取到正确的 DOM，setState 接受第二个参数，是执行完的回调函数</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>prevState<span class="token punctuation">.</span>list<span class="token punctuation">,</span> prevState<span class="token punctuation">.</span>inputValue<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ul<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;li&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><h3 id="生命周期函数" tabindex="-1"><a class="header-anchor" href="#生命周期函数" aria-hidden="true">#</a> 生命周期函数</h3><div class="custom-container tip"><p class="custom-container-title">生命周期函数</p><ul><li>在某一个时刻组件会自动执行的函数</li><li>render 函数需要定义</li><li>state 和 props 发生改变时 render 函数自动执行；父组件的 render 函数重新执行时，子组件的 render 函数也会自动执行</li></ul></div><p><img src="https://raw.githubusercontent.com/caffreygo/static/main/blog/react/lifeFunc.PNG" alt=""></p><ul><li><p>componentWillMount：在组件即将被挂载到页面的时刻自动执行</p></li><li><p>componentDidMount：组件被挂载到页面之后，自动执行</p></li><li><p>shouldComponentUpdate：在组件更新之前会被自动执行 (return Boolean)</p><p>由返回的布尔值确定组件是否需要被更新</p></li><li><p>componentWillUpdate：组件被更新之前，他会被自动执行，但是它在 shoudComponentUpdate 之后被执行，由 shoudComponentUpdate 的返回值确定是否执行</p></li><li><p>componentDidUpdate：在组件更新之后自动执行</p></li><li><p>componentWillReceiveProps：当一个组件从父组件接收参数，只要父组件的 render 函数被执行了，这个函数就会被执行</p><p>如果这个组件第一次存在于父组件中，不会执行；如果这个组件已经存在于父组件中，才会执行</p></li><li><p>componentWillUnmount：当组件即将从页面中剔除时执行</p></li></ul><h3 id="生命周期函数的使用" tabindex="-1"><a class="header-anchor" href="#生命周期函数的使用" aria-hidden="true">#</a> 生命周期函数的使用</h3><ul><li><p>性能优化--shouldComponentUpdate：父组件 render 执行时，子组件的 render 函数也会执行。例如在 TodoList 中，输入框的改变导致了子组件 Item 的 render 函数重新执行，但是其实子组件只需要在 btnClick 时才需要执行：</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 子组件TodoItem被渲染一次后，除非是content改变</span>
    <span class="token comment">// 否则不允许无谓的render(父组件input改变导致的render重新执行)</span>
    <span class="token comment">// render函数的执行需要生成虚拟DOM进行比对</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>content <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>AJAX--componentDidMount：只在组件的生命周期中执行一次，考虑各种情况，这个最合适</p></li></ul><h3 id="charles-数据-mock" tabindex="-1"><a class="header-anchor" href="#charles-数据-mock" aria-hidden="true">#</a> Charles 数据 mock</h3><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;api/todolist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="react-中的-css-动画" tabindex="-1"><a class="header-anchor" href="#react-中的-css-动画" aria-hidden="true">#</a> React 中的 css 动画</h3><ul><li><p>css3 的 transition 的过渡效果</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleToggle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token string">&#39;show&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;hide&#39;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Toggle</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleToggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">show</span><span class="token operator">:</span> prevState<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><div class="language-css ext-css"><pre class="language-css"><code><span class="token selector">.show</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease-in<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hide</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease-out<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>css 的动画效果@keyframes</p><div class="language-css ext-css"><pre class="language-css"><code><span class="token selector">.show</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> show-item 2s ease-out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hide</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> hide-item 2s ease-out forwards<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> hide-item</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">50%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> show-item</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">50%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><h3 id="react-transition-group" tabindex="-1"><a class="header-anchor" href="#react-transition-group" aria-hidden="true">#</a> react-transition-group</h3><ul><li>CSSTransition 实现 class</li><li>classNames 指定类名开头</li><li>unmountOnExit 在 exit 后不渲染 DOM</li><li>钩子函数实现 js</li><li><code>appear={true}</code>实现入场动画的第一帧 （fade-appear,fade-appear-active）</li></ul><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-transition-group&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;./style.css&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleToggle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span> <span class="token attr-name">in</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show<span class="token punctuation">}</span></span> <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span> <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Toggle</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleToggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">show</span><span class="token operator">:</span> prevState<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><div class="language-css ext-css"><pre class="language-css"><code><span class="token comment">/* 入场动画 */</span>
<span class="token selector">.fade-enter</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.fade-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.fade-enter-done</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 出场动画 */</span>
<span class="token selector">.fade-exit</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.fade-exit-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.fade-exit-done</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>出场之后修改文字颜色</p><ol><li><div class="language-text ext-text"><pre class="language-text"><code>.fade-enter-done {
    opacity: 1;
    color: red
}
</code></pre></div></li><li><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
  <span class="token attr-name">in</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show<span class="token punctuation">}</span></span>
  <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">unmountOnExit</span>
  <span class="token attr-name">onEntered</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;blue&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol></li></ul><ul><li><p>TransitionGroup 可以在外层包裹实现多个动画的实现</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span>
        <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">unmountOnExit</span>
        <span class="token attr-name">onEntered</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;blue&#39;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">appear</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">item</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleAddItem<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Toggle</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: sdp_518@126.com">Ahon-pan</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/my-blog/framework/react/redux.html" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/my-blog/assets/app.4bbb0959.js" defer></script>
  </body>
</html>
