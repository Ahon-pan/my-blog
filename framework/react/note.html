<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/my-blog/css/index.css"><script language="javascript" type="text/javascript" src="/my-blog/js/MouseClickEffect.js"></script><title>Note | William</title><meta name="description" content="William的博客">
    <link rel="modulepreload" href="/my-blog/assets/app.4bbb0959.js"><link rel="modulepreload" href="/my-blog/assets/note.html.1bcac050.js"><link rel="modulepreload" href="/my-blog/assets/note.html.16694b3c.js"><link rel="prefetch" href="/my-blog/assets/index.html.a7de8857.js"><link rel="prefetch" href="/my-blog/assets/background.html.cfadbc91.js"><link rel="prefetch" href="/my-blog/assets/basic.html.365fea19.js"><link rel="prefetch" href="/my-blog/assets/box-model.html.87c0a303.js"><link rel="prefetch" href="/my-blog/assets/data.html.cba8828f.js"><link rel="prefetch" href="/my-blog/assets/flex.html.b3061d48.js"><link rel="prefetch" href="/my-blog/assets/float.html.c910dcb7.js"><link rel="prefetch" href="/my-blog/assets/grid.html.7490621f.js"><link rel="prefetch" href="/my-blog/assets/keyframes.html.59ab7cde.js"><link rel="prefetch" href="/my-blog/assets/media.html.ffc2e2b4.js"><link rel="prefetch" href="/my-blog/assets/position.html.0f7aeb73.js"><link rel="prefetch" href="/my-blog/assets/priority.html.62fad651.js"><link rel="prefetch" href="/my-blog/assets/selector.html.65fcbf2d.js"><link rel="prefetch" href="/my-blog/assets/text.html.554dc9ee.js"><link rel="prefetch" href="/my-blog/assets/transform.html.8af46ffb.js"><link rel="prefetch" href="/my-blog/assets/transition.html.4fa18f65.js"><link rel="prefetch" href="/my-blog/assets/index.html.c434b54c.js"><link rel="prefetch" href="/my-blog/assets/index.html.7caeb920.js"><link rel="prefetch" href="/my-blog/assets/form-list.html.83308341.js"><link rel="prefetch" href="/my-blog/assets/link-img.html.21e38076.js"><link rel="prefetch" href="/my-blog/assets/structure.html.7ef1b5ba.js"><link rel="prefetch" href="/my-blog/assets/table-media.html.a4247c3f.js"><link rel="prefetch" href="/my-blog/assets/text.html.b4549b8f.js"><link rel="prefetch" href="/my-blog/assets/offer.html.0f04c825.js"><link rel="prefetch" href="/my-blog/assets/JPromise.html.3c5db6a1.js"><link rel="prefetch" href="/my-blog/assets/array.html.966a8bb3.js"><link rel="prefetch" href="/my-blog/assets/basic.html.b42b0d57.js"><link rel="prefetch" href="/my-blog/assets/canvas.html.66c13ac9.js"><link rel="prefetch" href="/my-blog/assets/class.html.fc715035.js"><link rel="prefetch" href="/my-blog/assets/closure.html.b278efe8.js"><link rel="prefetch" href="/my-blog/assets/dom.html.24d36d0b.js"><link rel="prefetch" href="/my-blog/assets/function.html.b6f0a7fe.js"><link rel="prefetch" href="/my-blog/assets/map.html.c6cc30ce.js"><link rel="prefetch" href="/my-blog/assets/module.html.0ae5f1c4.js"><link rel="prefetch" href="/my-blog/assets/object.html.d3767f0d.js"><link rel="prefetch" href="/my-blog/assets/promise.html.e240b08c.js"><link rel="prefetch" href="/my-blog/assets/prototype.html.7f7ebb40.js"><link rel="prefetch" href="/my-blog/assets/regexp.html.13671b83.js"><link rel="prefetch" href="/my-blog/assets/set.html.7dda1f78.js"><link rel="prefetch" href="/my-blog/assets/storage.html.e5783dc1.js"><link rel="prefetch" href="/my-blog/assets/symbol.html.d215c347.js"><link rel="prefetch" href="/my-blog/assets/task.html.279f73a6.js"><link rel="prefetch" href="/my-blog/assets/valueType.html.2f35a70c.js"><link rel="prefetch" href="/my-blog/assets/basic.html.9d0e7c81.js"><link rel="prefetch" href="/my-blog/assets/dataType.html.3ca051c4.js"><link rel="prefetch" href="/my-blog/assets/datetime.html.78a46bfc.js"><link rel="prefetch" href="/my-blog/assets/foreignKey.html.660b6387.js"><link rel="prefetch" href="/my-blog/assets/lock.html.7a88a67f.js"><link rel="prefetch" href="/my-blog/assets/multiple.html.1ebb6f8c.js"><link rel="prefetch" href="/my-blog/assets/statistics.html.728b25f7.js"><link rel="prefetch" href="/my-blog/assets/table.html.4e117843.js"><link rel="prefetch" href="/my-blog/assets/transaction.html.84c0ce0c.js"><link rel="prefetch" href="/my-blog/assets/algorithm.html.834dd9bb.js"><link rel="prefetch" href="/my-blog/assets/daily.html.3730e2a7.js"><link rel="prefetch" href="/my-blog/assets/manual.html.00f6b48d.js"><link rel="prefetch" href="/my-blog/assets/module.html.49c9fc81.js"><link rel="prefetch" href="/my-blog/assets/git.html.f4f4f051.js"><link rel="prefetch" href="/my-blog/assets/http.html.8ebbc6c6.js"><link rel="prefetch" href="/my-blog/assets/tmux.html.658fd5bd.js"><link rel="prefetch" href="/my-blog/assets/chapter1.html.50cc83f4.js"><link rel="prefetch" href="/my-blog/assets/chapter2.html.2077b1e9.js"><link rel="prefetch" href="/my-blog/assets/chapter3.html.2049d4af.js"><link rel="prefetch" href="/my-blog/assets/chapter4.html.3a370be6.js"><link rel="prefetch" href="/my-blog/assets/chapter5.html.bbd2a06e.js"><link rel="prefetch" href="/my-blog/assets/chapter6.html.8c0c4886.js"><link rel="prefetch" href="/my-blog/assets/chapter10.html.1182bb94.js"><link rel="prefetch" href="/my-blog/assets/chapter11.html.8e257d0a.js"><link rel="prefetch" href="/my-blog/assets/chapter7.html.23a75e7e.js"><link rel="prefetch" href="/my-blog/assets/chapter8.html.9e5fed04.js"><link rel="prefetch" href="/my-blog/assets/chapter9.html.276f674f.js"><link rel="prefetch" href="/my-blog/assets/chapter12.html.cee34393.js"><link rel="prefetch" href="/my-blog/assets/chapter13.html.ff23f30a.js"><link rel="prefetch" href="/my-blog/assets/chapter14.html.209c55fd.js"><link rel="prefetch" href="/my-blog/assets/basic.html.ec84ed4d.js"><link rel="prefetch" href="/my-blog/assets/redux.html.f2c78eed.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.2915eb2f.js"><link rel="prefetch" href="/my-blog/assets/animation.html.99c2166b.js"><link rel="prefetch" href="/my-blog/assets/basic.html.e8a81792.js"><link rel="prefetch" href="/my-blog/assets/book.html.7de635a8.js"><link rel="prefetch" href="/my-blog/assets/compositionApi.html.a9e85ba9.js"><link rel="prefetch" href="/my-blog/assets/vue.html.b9d4423b.js"><link rel="prefetch" href="/my-blog/assets/index.html.7376b2ba.js"><link rel="prefetch" href="/my-blog/assets/basic.html.06b7944a.js"><link rel="prefetch" href="/my-blog/assets/step-2.html.e4dfc14a.js"><link rel="prefetch" href="/my-blog/assets/step-3.html.a139e6ac.js"><link rel="prefetch" href="/my-blog/assets/step-4.html.a7e1a3da.js"><link rel="prefetch" href="/my-blog/assets/step-5.html.2663f325.js"><link rel="prefetch" href="/my-blog/assets/basic.html.f96e9ec0.js"><link rel="prefetch" href="/my-blog/assets/express.html.b9dd30a1.js"><link rel="prefetch" href="/my-blog/assets/final.html.2664159b.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.8f79dba9.js"><link rel="prefetch" href="/my-blog/assets/basic.html.bc0f2914.js"><link rel="prefetch" href="/my-blog/assets/final.html.20f2cff9.js"><link rel="prefetch" href="/my-blog/assets/note.html.b8eca5f9.js"><link rel="prefetch" href="/my-blog/assets/404.html.265028f6.js"><link rel="prefetch" href="/my-blog/assets/index.html.7c6c7785.js"><link rel="prefetch" href="/my-blog/assets/background.html.4e34aa41.js"><link rel="prefetch" href="/my-blog/assets/basic.html.06b77917.js"><link rel="prefetch" href="/my-blog/assets/box-model.html.439d8adc.js"><link rel="prefetch" href="/my-blog/assets/data.html.a65b5935.js"><link rel="prefetch" href="/my-blog/assets/flex.html.efd52128.js"><link rel="prefetch" href="/my-blog/assets/float.html.260b5036.js"><link rel="prefetch" href="/my-blog/assets/grid.html.cdc7ce25.js"><link rel="prefetch" href="/my-blog/assets/keyframes.html.060cc148.js"><link rel="prefetch" href="/my-blog/assets/media.html.9ddc4192.js"><link rel="prefetch" href="/my-blog/assets/position.html.074a15cf.js"><link rel="prefetch" href="/my-blog/assets/priority.html.d371ff9f.js"><link rel="prefetch" href="/my-blog/assets/selector.html.bbc1f562.js"><link rel="prefetch" href="/my-blog/assets/text.html.a0a67016.js"><link rel="prefetch" href="/my-blog/assets/transform.html.3f140a45.js"><link rel="prefetch" href="/my-blog/assets/transition.html.09ccb518.js"><link rel="prefetch" href="/my-blog/assets/index.html.f3d45f39.js"><link rel="prefetch" href="/my-blog/assets/index.html.2763ec89.js"><link rel="prefetch" href="/my-blog/assets/form-list.html.93d0fb9d.js"><link rel="prefetch" href="/my-blog/assets/link-img.html.e3d512cc.js"><link rel="prefetch" href="/my-blog/assets/structure.html.2cb32189.js"><link rel="prefetch" href="/my-blog/assets/table-media.html.6328f9ed.js"><link rel="prefetch" href="/my-blog/assets/text.html.02d4e9e9.js"><link rel="prefetch" href="/my-blog/assets/offer.html.222a5c15.js"><link rel="prefetch" href="/my-blog/assets/JPromise.html.d6f62823.js"><link rel="prefetch" href="/my-blog/assets/array.html.a8eee129.js"><link rel="prefetch" href="/my-blog/assets/basic.html.85aa812f.js"><link rel="prefetch" href="/my-blog/assets/canvas.html.1202cafd.js"><link rel="prefetch" href="/my-blog/assets/class.html.802ae6b4.js"><link rel="prefetch" href="/my-blog/assets/closure.html.056cb5e8.js"><link rel="prefetch" href="/my-blog/assets/dom.html.856633da.js"><link rel="prefetch" href="/my-blog/assets/function.html.e2af5f0e.js"><link rel="prefetch" href="/my-blog/assets/map.html.36b71573.js"><link rel="prefetch" href="/my-blog/assets/module.html.dbbfcd77.js"><link rel="prefetch" href="/my-blog/assets/object.html.d2ef4498.js"><link rel="prefetch" href="/my-blog/assets/promise.html.cc01c2fc.js"><link rel="prefetch" href="/my-blog/assets/prototype.html.3b39278f.js"><link rel="prefetch" href="/my-blog/assets/regexp.html.07e4d142.js"><link rel="prefetch" href="/my-blog/assets/set.html.cd1064e7.js"><link rel="prefetch" href="/my-blog/assets/storage.html.ca6a8c1e.js"><link rel="prefetch" href="/my-blog/assets/symbol.html.6fc08621.js"><link rel="prefetch" href="/my-blog/assets/task.html.994f424a.js"><link rel="prefetch" href="/my-blog/assets/valueType.html.2bdc9090.js"><link rel="prefetch" href="/my-blog/assets/basic.html.72e5f0af.js"><link rel="prefetch" href="/my-blog/assets/dataType.html.68029a1f.js"><link rel="prefetch" href="/my-blog/assets/datetime.html.b2864b69.js"><link rel="prefetch" href="/my-blog/assets/foreignKey.html.764fc535.js"><link rel="prefetch" href="/my-blog/assets/lock.html.172942c4.js"><link rel="prefetch" href="/my-blog/assets/multiple.html.dc26c9d8.js"><link rel="prefetch" href="/my-blog/assets/statistics.html.5e3a2e34.js"><link rel="prefetch" href="/my-blog/assets/table.html.15c5a514.js"><link rel="prefetch" href="/my-blog/assets/transaction.html.9f25b42a.js"><link rel="prefetch" href="/my-blog/assets/algorithm.html.09254f7e.js"><link rel="prefetch" href="/my-blog/assets/daily.html.c9479c81.js"><link rel="prefetch" href="/my-blog/assets/manual.html.e68606ff.js"><link rel="prefetch" href="/my-blog/assets/module.html.c646bb23.js"><link rel="prefetch" href="/my-blog/assets/git.html.468c26df.js"><link rel="prefetch" href="/my-blog/assets/http.html.4a31545c.js"><link rel="prefetch" href="/my-blog/assets/tmux.html.0a956fa3.js"><link rel="prefetch" href="/my-blog/assets/chapter1.html.f3c6c91f.js"><link rel="prefetch" href="/my-blog/assets/chapter2.html.f3fee6e1.js"><link rel="prefetch" href="/my-blog/assets/chapter3.html.343fc6cc.js"><link rel="prefetch" href="/my-blog/assets/chapter4.html.d3ea6484.js"><link rel="prefetch" href="/my-blog/assets/chapter5.html.0d7f107f.js"><link rel="prefetch" href="/my-blog/assets/chapter6.html.16b30a38.js"><link rel="prefetch" href="/my-blog/assets/chapter10.html.acc90bd9.js"><link rel="prefetch" href="/my-blog/assets/chapter11.html.2cdc1712.js"><link rel="prefetch" href="/my-blog/assets/chapter7.html.fdc8f349.js"><link rel="prefetch" href="/my-blog/assets/chapter8.html.50829096.js"><link rel="prefetch" href="/my-blog/assets/chapter9.html.afaadb3a.js"><link rel="prefetch" href="/my-blog/assets/chapter12.html.4a7c8938.js"><link rel="prefetch" href="/my-blog/assets/chapter13.html.1a4647a6.js"><link rel="prefetch" href="/my-blog/assets/chapter14.html.da970347.js"><link rel="prefetch" href="/my-blog/assets/basic.html.184f2c33.js"><link rel="prefetch" href="/my-blog/assets/redux.html.b3c33c99.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.0cade711.js"><link rel="prefetch" href="/my-blog/assets/animation.html.ef0e7d95.js"><link rel="prefetch" href="/my-blog/assets/basic.html.ed7d3874.js"><link rel="prefetch" href="/my-blog/assets/book.html.c68d8809.js"><link rel="prefetch" href="/my-blog/assets/compositionApi.html.458b8908.js"><link rel="prefetch" href="/my-blog/assets/vue.html.916610b1.js"><link rel="prefetch" href="/my-blog/assets/index.html.4eab5758.js"><link rel="prefetch" href="/my-blog/assets/basic.html.9ab8b156.js"><link rel="prefetch" href="/my-blog/assets/step-2.html.cbd8493e.js"><link rel="prefetch" href="/my-blog/assets/step-3.html.c1b63356.js"><link rel="prefetch" href="/my-blog/assets/step-4.html.7f689ce5.js"><link rel="prefetch" href="/my-blog/assets/step-5.html.cd6d1d49.js"><link rel="prefetch" href="/my-blog/assets/basic.html.30e5fe9f.js"><link rel="prefetch" href="/my-blog/assets/express.html.892bfa72.js"><link rel="prefetch" href="/my-blog/assets/final.html.1cec4f5e.js"><link rel="prefetch" href="/my-blog/assets/advanced.html.e5f34d70.js"><link rel="prefetch" href="/my-blog/assets/basic.html.bc406685.js"><link rel="prefetch" href="/my-blog/assets/final.html.feb5a6e1.js"><link rel="prefetch" href="/my-blog/assets/note.html.6a93b4a2.js"><link rel="prefetch" href="/my-blog/assets/404.html.490f2572.js"><link rel="prefetch" href="/my-blog/assets/404.214c3824.js"><link rel="prefetch" href="/my-blog/assets/Layout.3c062dfa.js"><link rel="prefetch" href="/my-blog/assets/svgAnimate1.6521df25.js"><link rel="prefetch" href="/my-blog/assets/test.0ee0aaf8.js">
    <link rel="stylesheet" href="/my-blog/assets/style.2ec95b24.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/my-blog/" class=""><img class="logo" src="/my-blog/avater.png" alt="William"><span class="site-name can-hide">William</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/basic" class="" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/valueType" class="" aria-label="基本类型"><!--[--><!--]--> 基本类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/array" class="" aria-label="数组类型"><!--[--><!--]--> 数组类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/symbol" class="" aria-label="Symbol"><!--[--><!--]--> Symbol <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/set" class="" aria-label="Set"><!--[--><!--]--> Set <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/map" class="" aria-label="Map"><!--[--><!--]--> Map <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/function" class="" aria-label="函数进阶"><!--[--><!--]--> 函数进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/closure" class="" aria-label="作用域与闭包"><!--[--><!--]--> 作用域与闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/object" class="" aria-label="对象"><!--[--><!--]--> 对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/prototype" class="" aria-label="原型与继承"><!--[--><!--]--> 原型与继承 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/class" class="" aria-label="class"><!--[--><!--]--> class <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/module" class="" aria-label="模块设计"><!--[--><!--]--> 模块设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/regexp" class="" aria-label="正则表达式"><!--[--><!--]--> 正则表达式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/promise" class="" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/task" class="" aria-label="任务管理"><!--[--><!--]--> 任务管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/JPromise" class="" aria-label="Promise核心"><!--[--><!--]--> Promise核心 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/dom" class="" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/canvas" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/note" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/advanced" class="" aria-label="语法进阶"><!--[--><!--]--> 语法进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/final" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>爬虫实现</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/basic" class="" aria-label="爬虫工具"><!--[--><!--]--> 爬虫工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/express" class="" aria-label="Express"><!--[--><!--]--> Express <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/final" class="" aria-label="项目改良"><!--[--><!--]--> 项目改良 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/compositionApi" class="" aria-label="Composition API"><!--[--><!--]--> Composition API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/animation" class="" aria-label="动画"><!--[--><!--]--> 动画 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/advanced" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/vue" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/book" class="" aria-label="VueJs深入浅出"><!--[--><!--]--> VueJs深入浅出 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React Js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/basic" class="" aria-label="React基础"><!--[--><!--]--> React基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/redux" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/note" class="router-link-active" aria-label="笔记"><!--[--><!--]--> 笔记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/my-blog/tools/tmux" class="" aria-label="tmux"><!--[--><!--]--> tmux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/http" class="" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack4.0</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/basic" class="" aria-label="基本概念"><!--[--><!--]--> 基本概念 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-2" class="" aria-label="起步介绍"><!--[--><!--]--> 起步介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-3" class="" aria-label="打包配置"><!--[--><!--]--> 打包配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-4" class="" aria-label="进阶"><!--[--><!--]--> 进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-5" class="" aria-label="配置案例"><!--[--><!--]--> 配置案例 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/my-blog/interview/offer" class="" aria-label="剑指offer"><!--[--><!--]--> 剑指offer <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaScript"><span class="title">JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/basic" class="" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/valueType" class="" aria-label="基本类型"><!--[--><!--]--> 基本类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/array" class="" aria-label="数组类型"><!--[--><!--]--> 数组类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/symbol" class="" aria-label="Symbol"><!--[--><!--]--> Symbol <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/set" class="" aria-label="Set"><!--[--><!--]--> Set <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/map" class="" aria-label="Map"><!--[--><!--]--> Map <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/function" class="" aria-label="函数进阶"><!--[--><!--]--> 函数进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/closure" class="" aria-label="作用域与闭包"><!--[--><!--]--> 作用域与闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/object" class="" aria-label="对象"><!--[--><!--]--> 对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/prototype" class="" aria-label="原型与继承"><!--[--><!--]--> 原型与继承 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/class" class="" aria-label="class"><!--[--><!--]--> class <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/module" class="" aria-label="模块设计"><!--[--><!--]--> 模块设计 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/regexp" class="" aria-label="正则表达式"><!--[--><!--]--> 正则表达式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/promise" class="" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/task" class="" aria-label="任务管理"><!--[--><!--]--> 任务管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/JPromise" class="" aria-label="Promise核心"><!--[--><!--]--> Promise核心 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/dom" class="" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/javascript/canvas" class="" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="TypeScript"><span class="title">TypeScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>语法基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/note" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/advanced" class="" aria-label="语法进阶"><!--[--><!--]--> 语法进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/grammar/final" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>爬虫实现</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/basic" class="" aria-label="爬虫工具"><!--[--><!--]--> 爬虫工具 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/express" class="" aria-label="Express"><!--[--><!--]--> Express <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/typescript/crawler/final" class="" aria-label="项目改良"><!--[--><!--]--> 项目改良 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端框架"><span class="title">前端框架</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Vue</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/compositionApi" class="" aria-label="Composition API"><!--[--><!--]--> Composition API <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/basic" class="" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/animation" class="" aria-label="动画"><!--[--><!--]--> 动画 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/advanced" class="" aria-label="高级语法"><!--[--><!--]--> 高级语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/vue" class="" aria-label="日常笔记"><!--[--><!--]--> 日常笔记 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/vue/book" class="" aria-label="VueJs深入浅出"><!--[--><!--]--> VueJs深入浅出 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>React Js</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/basic" class="" aria-label="React基础"><!--[--><!--]--> React基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/redux" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/framework/react/note" class="router-link-active" aria-label="笔记"><!--[--><!--]--> 笔记 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具 | 协议"><span class="title">工具 | 协议</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/my-blog/tools/tmux" class="" aria-label="tmux"><!--[--><!--]--> tmux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/http" class="" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/my-blog/tools/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Webpack4.0</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/basic" class="" aria-label="基本概念"><!--[--><!--]--> 基本概念 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-2" class="" aria-label="起步介绍"><!--[--><!--]--> 起步介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-3" class="" aria-label="打包配置"><!--[--><!--]--> 打包配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-4" class="" aria-label="进阶"><!--[--><!--]--> 进阶 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/my-blog/tools/webpack/step-5" class="" aria-label="配置案例"><!--[--><!--]--> 配置案例 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a href="/my-blog/interview/offer" class="" aria-label="剑指offer"><!--[--><!--]--> 剑指offer <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">React.js <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/my-blog/framework/react/basic.html" class="sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----></li><li><a href="/my-blog/framework/react/redux.html" class="sidebar-item" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Note"><!--[--><!--]--> Note <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/note.html#styled-components" class="router-link-active router-link-exact-active sidebar-item" aria-label="styled-components"><!--[--><!--]--> styled-components <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/note.html#全局样式" class="router-link-active router-link-exact-active sidebar-item" aria-label="全局样式"><!--[--><!--]--> 全局样式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#样式组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="样式组件"><!--[--><!--]--> 样式组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#包含图片组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="包含图片组件"><!--[--><!--]--> 包含图片组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#input-组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="Input 组件"><!--[--><!--]--> Input 组件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#iconfont-的使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="iconfont 的使用"><!--[--><!--]--> iconfont 的使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#输入框动画" class="router-link-active router-link-exact-active sidebar-item" aria-label="输入框动画"><!--[--><!--]--> 输入框动画 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#redux-react-redux" class="router-link-active router-link-exact-active sidebar-item" aria-label="redux &amp;&amp; react-redux"><!--[--><!--]--> redux &amp;&amp; react-redux <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#redux-devtools-extension" class="router-link-active router-link-exact-active sidebar-item" aria-label="redux-devtools-extension"><!--[--><!--]--> redux-devtools-extension <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#reducer-拆分" class="router-link-active router-link-exact-active sidebar-item" aria-label="reducer 拆分"><!--[--><!--]--> reducer 拆分 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/note.html#拆分" class="router-link-active router-link-exact-active sidebar-item" aria-label="拆分"><!--[--><!--]--> 拆分 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#整合" class="router-link-active router-link-exact-active sidebar-item" aria-label="整合"><!--[--><!--]--> 整合 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#actioncreators" class="router-link-active router-link-exact-active sidebar-item" aria-label="actionCreators"><!--[--><!--]--> actionCreators <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#immutable-js" class="router-link-active router-link-exact-active sidebar-item" aria-label="Immutable.js"><!--[--><!--]--> Immutable.js <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#redux-immutable" class="router-link-active router-link-exact-active sidebar-item" aria-label="redux-immutable"><!--[--><!--]--> redux-immutable <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#redux-thunk-axios" class="router-link-active router-link-exact-active sidebar-item" aria-label="redux-thunk &amp; axios"><!--[--><!--]--> redux-thunk &amp; axios <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/note.html#调整" class="router-link-active router-link-exact-active sidebar-item" aria-label="调整"><!--[--><!--]--> 调整 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#请求优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="请求优化"><!--[--><!--]--> 请求优化 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#css-实现旋转动画" class="router-link-active router-link-exact-active sidebar-item" aria-label="css 实现旋转动画"><!--[--><!--]--> css 实现旋转动画 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#路由" class="router-link-active router-link-exact-active sidebar-item" aria-label="路由"><!--[--><!--]--> 路由 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#数据异步获取" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据异步获取"><!--[--><!--]--> 数据异步获取 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/note.html#组件内的获取" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件内的获取"><!--[--><!--]--> 组件内的获取 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#请求代码优化管理" class="router-link-active router-link-exact-active sidebar-item" aria-label="请求代码优化管理"><!--[--><!--]--> 请求代码优化管理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#页面路由参数获取" class="router-link-active router-link-exact-active sidebar-item" aria-label="页面路由参数获取"><!--[--><!--]--> 页面路由参数获取 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/note.html#params-参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="params 参数"><!--[--><!--]--> params 参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#query-参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="query 参数"><!--[--><!--]--> query 参数 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#异步组件加载" class="router-link-active router-link-exact-active sidebar-item" aria-label="异步组件加载"><!--[--><!--]--> 异步组件加载 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#加载更多" class="router-link-active router-link-exact-active sidebar-item" aria-label="加载更多"><!--[--><!--]--> 加载更多 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/my-blog/framework/react/note.html#actioncreators-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="actionCreators"><!--[--><!--]--> actionCreators <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#reducer-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="reducer"><!--[--><!--]--> reducer <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#回到顶部" class="router-link-active router-link-exact-active sidebar-item" aria-label="回到顶部"><!--[--><!--]--> 回到顶部 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#路由跳转" class="router-link-active router-link-exact-active sidebar-item" aria-label="路由跳转"><!--[--><!--]--> 路由跳转 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/my-blog/framework/react/note.html#purecomponent" class="router-link-active router-link-exact-active sidebar-item" aria-label="PureComponent"><!--[--><!--]--> PureComponent <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="note" tabindex="-1"><a class="header-anchor" href="#note" aria-hidden="true">#</a> Note</h1><h2 id="styled-components" tabindex="-1"><a class="header-anchor" href="#styled-components" aria-hidden="true">#</a> styled-components</h2><div class="custom-container tip"><p class="custom-container-title">styled-components</p><ul><li><p>实现样式独享</p></li><li><p>css 在某个组件内引入之后，其它组件没有引入但是也会生效（样式全局化）</p></li><li><p>实现样式只在引入的组件内生效</p></li></ul></div><h3 id="全局样式" tabindex="-1"><a class="header-anchor" href="#全局样式" aria-hidden="true">#</a> 全局样式</h3><ul><li>createGlobalStyle 实现全局样式导入</li><li>组件内引入该样式组件，放在需要渲染组件的最上方</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createGlobalStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> GlobalStyle <span class="token operator">=</span> createGlobalStyle<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    b, u, i, center,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td,
    article, aside, canvas, details, embed, 
    figure, figcaption, footer, header, hgroup, 
    menu, nav, output, ruby, section, summary,
    time, mark, audio, video {
      margin: 0;
      padding: 0;
      border: 0;
      font-size: 100%;
      font: inherit;
      vertical-align: baseline;
    }
    /* HTML5 display-role reset for older browsers */
    article, aside, details, figcaption, figure, 
    footer, header, hgroup, menu, nav, section {
      display: block;
    }
    body {
      line-height: 1;
    }
    ol, ul {
      list-style: none;
    }
    blockquote, q {
      quotes: none;
    }
    blockquote:before, blockquote:after,
    q:before, q:after {
      content: &#39;&#39;;
      content: none;
    }
    table {
      border-collapse: collapse;
      border-spacing: 0;
    }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GlobalStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./style.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>GlobalStyle <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;red&quot;</span><span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><h3 id="样式组件" tabindex="-1"><a class="header-anchor" href="#样式组件" aria-hidden="true">#</a> 样式组件</h3><ol><li><p>创建一个 div 组件带有样式</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> HeaderWrapper <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  height: 56px;
  background: red;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>组件引入使用该组件</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HeaderWrapper <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./style&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>HeaderWrapper<span class="token operator">&gt;</span>header<span class="token operator">&lt;</span><span class="token operator">/</span>HeaderWrapper<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Header<span class="token punctuation">;</span>
</code></pre></div></li></ol><h3 id="包含图片组件" tabindex="-1"><a class="header-anchor" href="#包含图片组件" aria-hidden="true">#</a> 包含图片组件</h3><ul><li>图片需要<strong>先引入</strong>然后再使用（相对路径先编译后当前路径是根路径会出错）</li><li>hred 这种属性可以直接在组件上写<code>&lt;Logo href=&quot;/&quot; /&gt;</code>，也可以在 style 的<strong>attr</strong>方法内添加</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> LogoPic <span class="token keyword">from</span> <span class="token string">&quot;../../statics/logo.png&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> Logo <span class="token operator">=</span> styled<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">attrs</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  position: absolute;
  top: 0;
  left: 0;
  display: block;
  height: 56px;
  width: 100px;
  background: url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>LogoPic<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">);
  background-size: contain;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><hr><hr><p>通过<code>${(props)=&gt; ~}</code>函数返回值使用<strong>组件属性</strong></p><div class="language-html ext-html"><pre class="language-html"><code>&lt;RecommendItem
       imgUrl={item.get(&quot;imgUrl&quot;)}
       key={item.get(&quot;id&quot;)}
&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RecommendItem</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> RecommendItem <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  width: 280px;
  height: 50px;
  margin-bottom: 5px;
  background-image: url(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>imgUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">);
  background-size: contain;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">imgUrl</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../../../statics/1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="input-组件" tabindex="-1"><a class="header-anchor" href="#input-组件" aria-hidden="true">#</a> Input 组件</h3><p><code>&amp;::placeholder</code>更改 placeholder 文字颜色</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> NavSearch <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">attrs</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">&quot;搜索&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  width: 160px;
  height: 38px;
  border: none;
  outline: none;
  border-radius: 19px;
  margin-top: 9px;
  margin-left: 20px;
  padding: 0 20px;
  background-color: #eee;
  font-size: 15px;
  box-sizing: border-box;
  &amp;::placeholder {
    color: #999;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h2 id="iconfont-的使用" tabindex="-1"><a class="header-anchor" href="#iconfont-的使用" aria-hidden="true">#</a> iconfont 的使用</h2><ul><li><p>在 iconfont 新建仓库，添加对应图标，下载至本地</p></li><li><p>在 src/static 下新建 iconfont 文件夹</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token operator">|</span>-- iconfont
<span class="token operator">|</span>   <span class="token operator">|</span>-- iconfont.css
<span class="token operator">|</span>   <span class="token operator">|</span>-- iconfont.eot
<span class="token operator">|</span>   <span class="token operator">|</span>-- iconfont.svg
<span class="token operator">|</span>   <span class="token operator">|</span>-- iconfont.ttf
<span class="token operator">|</span>   <span class="token operator">|</span>-- iconfont.woff
<span class="token operator">|</span>   <span class="token operator">|</span>-- iconfont.woff2
</code></pre></div></li><li><p>修改 iconfont.css 中的引用路径为相对路径</p></li><li><p>修改 iconfont.css 为 iconfont.js 文件，使用<code>createGlobalStyle</code>导出全局 iconfont 组件</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createGlobalStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;styled-components&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> IconFont <span class="token operator">=</span> createGlobalStyle<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
@font-face {
  font-family: &#39;iconfont&#39;;
  src: url(&#39;./iconfont.eot?t=1591025542556&#39;); /* IE9 */
  src: url(&#39;.l/iconfont.eot?t=1591025542556#iefix&#39;) format(&#39;embedded-opentype&#39;),
    /* IE6-IE8 */
      url(&#39;data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAP8AAsAAAAACBQAAAOuAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCDHAqDUIMmATYCJAMQCwoABCAFhG0HRxsXB1GUzM0e2cdhHEMuSywmU5QSWtz4ard4+BpL39/9d9kQKlBMksdHRVKBjaiNapWrkBWqwtQC61beZJsVyirsqefM6JoaEmhqMJBztdeanNpL9KV/3Dv9fyc4n2W5jDVpbarzqAswmkABjb3ICihAjLlh7MqLWE9gwLxxqMvE9HzgIRndAvEGKzzwSJllTWZoQrdkbIr3XLXyUGoB8M7/fPwBvuFB0amMvlfPEiQQ/b37x0a/7c1W7iIk4znBJlGxAUjiRan7ETqMbaANKN9xcQRomsL37h+OPrb//6F0L+pm/uURikp0GelD4ACp6olJbB7B90AehR8eGjeJp7bBxAPgEyZnH1WkMuPl0aZZznOKfCv9kGpvL2xtzW9rK1j2MAptWHZsztSHD4uSwoK7tLd3Ygq98hkbW1K6cSCzvXcxf41dBgATzG1maT01p6hojj84vOD8YTD7CLvsHkXZCgovp9tIOHq97uFx29t65BdteBi2y+wZz/lBIWbci9qv5WHUxleWpQf7Pf0x8vzXsGr3jh0rRqlRpnX37q2rpsAVOvOuvXd/XYnSRrd17Lilr1/fALO8/kfP/3BqPlBU6DLNL7HQE8BfBm7LSU2j4ptQx/9CXLs1MqvAFCvgyIf5O9IgD4LNlOsZp44uxB0q2LTo0Hc3RaSmT4/ffYd/Gz4QfNozXjoq45NrnwUhjkppwLoIMnHG0HNJi0+t5dJPlYwrqY47fb0D9d91Cli1veHOojh0fPvvFGr7QWxGKZi6UlUpxGB6+OsvXXPpWqH7vLUDfZ7QAPTu1Nt0jI/+RwHaoA3+re3kcd63qk7hvzzY6yr6/Dt6IfL27iToJ/k3ktaSnyhpmZOqzLBkynJbrHnScaKbggED+HUpJrwYQzvdOp3QTMdQ9JmDqllAk9yAjkEH0NWcwIB1SZMHTdLRIvuxZgGAMOYUFCM+QjWmDk3yOXTM+ARdY0HDgOvoNuegpcBMnI54giQoTIFYVJ2yZSNMkJmLlAl2Xk/KfGYh0g0chD6cdzaZhJxIH2OAMVHxJUSGsq46YCLYDNntKtR01YpEwlkI0ULNZrnsRZyoOgDjgg7hEYgEEkwBYSKVk+wWJpjc+3MhignseHpNVoW/EKIz4NohHxzvFmiS2tkq61ouMUyk8EUQMkimUzlAicCJ2M2YCtLKW1khIoJj6RHRhDKjfHJbNTe/1vGEq2CAMU9GiRoZHQPPeKci8VbsDjfF8Gw2chpTJjh4VcAAAAAA&#39;)
      format(&#39;woff2&#39;),
    url(&#39;./iconfont.woff?t=1591025542556&#39;) format(&#39;woff&#39;),
    url(&#39;./iconfont.ttf?t=1591025542556&#39;) format(&#39;truetype&#39;),
    /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */
      url(&#39;./iconfont.svg?t=1591025542556#iconfont&#39;) format(&#39;svg&#39;); /* iOS 4.1- */
}

.iconfont {
  font-family: &#39;iconfont&#39; !important;
  font-size: 16px;
  font-style: normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.iconfangdajing:before {
  content: &#39;\e614&#39;;
}

.iconAa:before {
  content: &#39;\e636&#39;;
}

.iconPensyumaobi:before {
  content: &#39;\e708&#39;;
}
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>App.js 使用 IconFont 组件</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">&quot;./common/header&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GlobalStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./style.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IconFont <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./statics/iconfont/iconfont.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>GlobalStyle <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>IconFont <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div></li></ul><h2 id="输入框动画" tabindex="-1"><a class="header-anchor" href="#输入框动画" aria-hidden="true">#</a> 输入框动画</h2><ul><li><p>定义事件 onFocus、onBlur</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">handleInpusFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">handleInpusBlur</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li><li><p>引入 CSSTransition，设置<code>classNames</code>属性</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CSSTransition</span> <span class="token attr-name">timeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{200}</span> <span class="token attr-name">in</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{this.state.focused}</span> <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slide<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NavSearch</span> <span class="token special-attr"><span class="token attr-name">onFocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token value javascript language-javascript"><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInpusFocus<span class="token punctuation">}</span></span></span></span> <span class="token special-attr"><span class="token attr-name">onBlur</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token value javascript language-javascript"><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInpusBlur<span class="token punctuation">}</span></span></span></span> 				<span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{this.state.focused</span> <span class="token attr-name">?</span> <span class="token attr-name">&#39;focused&#39;</span> <span class="token attr-name">:</span> <span class="token attr-name">&#39;&#39;}</span>
    <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NavSearch</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CSSTransition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li><li><p>添加动画样式 slide-enter、slide-enter-active、slide-exit、slide-exit-active</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> SearchWrapper <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  float: left;
  position: relative;
  .slide-enter {
    width: 160px;
    transition: all 0.3s ease-out;
  }
  .slide-enter-active {
    width: 240px;
  }
  .slide-exit {
    transition: all 0.3s ease-out;
  }
  .slide-exit-active {
    width: 160px;
  }
  .iconfont {
    position: absolute;
    right: 5px;
    bottom: 5px;
    width: 30px;
    height: 30px;
    border-radius: 15px;
    line-height: 30px;
    text-align: center;
    &amp;.focused {
      background-color: #777;
      color: #fff;
    }
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div></li></ul><h2 id="redux-react-redux" tabindex="-1"><a class="header-anchor" href="#redux-react-redux" aria-hidden="true">#</a> redux &amp;&amp; react-redux</h2><ul><li><p>定义 store/index.js</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div></li><li><p>store/reducer.js</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;search_focus&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;search_blur&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>App.js 引入 store 和 Provider 组件</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">&quot;./common/header&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GlobalStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./style.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IconFont <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./statics/iconfont/iconfont.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>GlobalStyle <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>IconFont <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div></li><li><p>对应组件引入 connect</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-redux&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Header</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
	<span class="token operator">...</span><span class="token operator">...</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">focused</span><span class="token operator">:</span> state<span class="token punctuation">.</span>focused
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>Header<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul><h2 id="redux-devtools-extension" tabindex="-1"><a class="header-anchor" href="#redux-devtools-extension" aria-hidden="true">#</a> redux-devtools-extension</h2><p>https://github.com/zalmoxisus/redux-devtools-extension</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> compose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ <span class="token operator">||</span> compose<span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><h2 id="reducer-拆分" tabindex="-1"><a class="header-anchor" href="#reducer-拆分" aria-hidden="true">#</a> reducer 拆分</h2><p>reducer 如果存放过多的数据可能会造成代码的不可维护，reducer 的拆分和整合</p><h3 id="拆分" tabindex="-1"><a class="header-anchor" href="#拆分" aria-hidden="true">#</a> 拆分</h3><ul><li>common/header/store/reducer.js</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;search_focus&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;search_blur&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>common/header/store/index.js 导出</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> reducer <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="整合" tabindex="-1"><a class="header-anchor" href="#整合" aria-hidden="true">#</a> 整合</h3><ul><li>store/reducer.js <code>combineReducers</code>方法整合 reducer</li><li>as 是 es6 实现的别名</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reducer <span class="token keyword">as</span> headerReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../common/header/store&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> reducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> headerReducer<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>
</code></pre></div><ul><li>组件内 state 路径修改</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 整合后的focused在state的header下</span>
    <span class="token literal-property property">focused</span><span class="token operator">:</span> state<span class="token punctuation">.</span>header<span class="token punctuation">.</span>focused<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="actioncreators" tabindex="-1"><a class="header-anchor" href="#actioncreators" aria-hidden="true">#</a> actionCreators</h2><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token operator">|</span>-- header
<span class="token operator">|</span>   <span class="token operator">|</span>-- store
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- actionCreators.js
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- constants.js
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- index.js
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- reducer.js
<span class="token operator">|</span>   <span class="token operator">|</span>-- index.js
<span class="token operator">|</span>   <span class="token operator">|</span>-- style.js
</code></pre></div><ul><li><p>actionCreators 创建 action</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">searchFocus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_FOCUS</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">searchBlur</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_BLUR</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>constants 统一定义 action types</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SEARCH_FOCUS</span> <span class="token operator">=</span> <span class="token string">&quot;header/SEARCH_FOCUS&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">SEARCH_BLUR</span> <span class="token operator">=</span> <span class="token string">&quot;header/SEARCH_BLUR&quot;</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>store/index 统一导出</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> actionCreators <span class="token keyword">from</span> <span class="token string">&quot;./actionCreators&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> reducer<span class="token punctuation">,</span> actionCreators<span class="token punctuation">,</span> constants <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>reducer</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_FOCUS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_BLUR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>header/index.js 使用 actionCreators 创建 action</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> actionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./store&#39;</span><span class="token punctuation">;</span>

<span class="token operator">...</span><span class="token operator">...</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">handleInpusFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">searchFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleInpusBlur</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">searchBlur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul><h2 id="immutable-js" tabindex="-1"><a class="header-anchor" href="#immutable-js" aria-hidden="true">#</a> Immutable.js</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>state 不能直接修改，reducer 应返回一个新的 state</li><li>原始的方法存在 state 被误修改的风险</li><li>immutable.js 帮助我们生成一个 immutable 对象（不可改变）</li><li>实现 state 不可改变（fromJS、get、set）</li></ul></div><ol><li><p>将 reducer 中的 state 转化为通过<code>fromJS</code>方法转化为 immutable 对象</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;immutable&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>此时 state.header 对象已经是一个 immutable，属性的获取通过<code>get</code>方法获得</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">focused</span><span class="token operator">:</span> state<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;focused&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>reducer 再返回新的 state 之后，是一个普通的对象，通过 get 方法获取会报错。</p><p>immutable 对象<code>set</code>方法: 会结合之前 immutable 对象的值和设置的值返回一个<strong>全新</strong>的对象！</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_FOCUS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;focused&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_BLUR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;focused&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ol><div class="custom-container tip"><p class="custom-container-title">TIP</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> action<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;totalPage&quot;</span><span class="token punctuation">,</span> action<span class="token punctuation">.</span>totalPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// merge比多次的set操作性能更高</span>
state<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> action<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
  <span class="token literal-property property">totalPage</span><span class="token operator">:</span> action<span class="token punctuation">.</span>totalPage<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><h2 id="redux-immutable" tabindex="-1"><a class="header-anchor" href="#redux-immutable" aria-hidden="true">#</a> redux-immutable</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><ul><li>获取 focus 需要调用 state.header.get(&#39;focused&#39;)，state 和 header 两个对象类型不统一</li><li>应该将 state 也转化成 immutable 对象（redux-immutable）</li><li>redux-immutable 也提供了一个<code>combineReducers</code>方法生成的是 immutable 对象</li></ul></div><ol><li><p>store/reducer.js</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux-immutable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reducer <span class="token keyword">as</span> headerReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../common/header/store&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> reducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">header</span><span class="token operator">:</span> headerReducer<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>
</code></pre></div></li><li><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// focused: state.get(&#39;header&#39;).get(&#39;focused&#39;)</span>
    <span class="token literal-property property">focused</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token function">getIn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;header&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;focused&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li></ol><h2 id="redux-thunk-axios" tabindex="-1"><a class="header-anchor" href="#redux-thunk-axios" aria-hidden="true">#</a> redux-thunk &amp; axios</h2><ul><li><p>异步数据的获取都拆分到 actionCreators 中，要求 actionCreators 返回值从对象变成函数，这需要<code>redux-thunk</code>这个中间件，修改 store/index 配置如下:</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> compose<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">&quot;redux-thunk&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span>
  window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ <span class="token operator">||</span> compose<span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div></li><li><p>list 作为 state 的内部数组也是 immutable 类型的数组，如果直接派发改变会将该数组变成普通数组，在<code>changeList</code>函数中生成的 action 的 list 需要<code>fromJs</code>方法转换一下</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;immutable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">changeList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> constants<span class="token punctuation">.</span><span class="token constant">CHANGE_LIST</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    axios
      <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;api/headerList.json&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> success<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">changeList</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></li><li><p>数组改变之后需要通过数组的<code>map</code>方法循环展示数据</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SearchInfoList</span><span class="token punctuation">&gt;</span></span>
  { this.props.list.map((item) =&gt; { return
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SearchInfoItem</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{item}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{item}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SearchInfoItem</span><span class="token punctuation">&gt;</span></span>
  }) }
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SearchInfoList</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul><h3 id="调整" tabindex="-1"><a class="header-anchor" href="#调整" aria-hidden="true">#</a> 调整</h3><p>reducer.js：switch 语法一般需要跟 break，这边 case 之后有 return，就不需要了</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;immutable&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">focused</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_FOCUS</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;focused&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> constants<span class="token punctuation">.</span><span class="token constant">SEARCH_BLUR</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;focused&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> constants<span class="token punctuation">.</span><span class="token constant">CHANGE_LIST</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">,</span> action<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="请求优化" tabindex="-1"><a class="header-anchor" href="#请求优化" aria-hidden="true">#</a> 请求优化</h3><p>list 数据在请求之后便不需要再重复请求了，<code>handleInpusFocus</code>内传入 list，请求时判断</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>NavSearch
  onFocus<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">handleInpusFocus</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">}</span>
  onBlur<span class="token operator">=</span><span class="token punctuation">{</span>handleInpusBlur<span class="token punctuation">}</span>
  className<span class="token operator">=</span><span class="token punctuation">{</span>focused <span class="token operator">?</span> <span class="token string">&quot;focused&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>NavSearch<span class="token operator">&gt;</span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">handleInpusFocus</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>list<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">searchFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="css-实现旋转动画" tabindex="-1"><a class="header-anchor" href="#css-实现旋转动画" aria-hidden="true">#</a> css 实现旋转动画</h2><ul><li>使用<code>ref</code>获取到原始 dom 标签，在<code>handlePageChange</code>中传入</li></ul><div class="language-html ext-html"><pre class="language-html"><code>&lt;SearchInfoSwitch
    onClick={() =&gt; handlePageChange(page, totalPage, this.spinIcon)}
  	&gt;
    &lt;i ref={(icon) =&gt; { this.spinIcon = icon }} className=&quot;iconfont spin&quot;&gt;<span class="token entity" title="">&amp;#xe77f;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    换一批
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SearchInfoSwitch</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p><code>handlePageChange</code>获取到 style 的 transform 属性，将非数字替换为空</p><p>旋转角度自增 360，更新<code>transform: rotate(xxxdeg)</code></p></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">handlePageChange</span><span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> totalPage<span class="token punctuation">,</span> spin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> originAngle <span class="token operator">=</span> spin<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^0-9]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">ig</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>originAngle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        originAngle <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>originAngle<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        originAngle <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
    spin<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">&#39;rotate(&#39;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>originAngle <span class="token operator">+</span> <span class="token number">360</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;deg)&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>page <span class="token operator">&lt;</span> totalPage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">changePage</span><span class="token punctuation">(</span>page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">changePage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>block 标签才能 transform 旋转</p><p>transform-origin 设置旋转中心，这边是 center</p><p>transition 设置动画</p></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> SearchInfoSwitch <span class="token operator">=</span> styled<span class="token punctuation">.</span>span<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  float: right;
  cursor: pointer;
  font-size: 13px;
  .spin {
    display: block;
    float: left;
    font-size: 12px;
    margin-right: 2px;
    transition: all 0.2s ease-in;
    transform-origin: center center;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h2 id="路由" tabindex="-1"><a class="header-anchor" href="#路由" aria-hidden="true">#</a> 路由</h2><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save react-router-dom
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">&quot;./common/header&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter<span class="token punctuation">,</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> GlobalStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./style.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> IconFont <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./statics/iconfont/iconfont.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>GlobalStyle <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>IconFont <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> exact render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>home<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/detail&quot;</span> exact render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>detail<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><div class="custom-container tip"><p class="custom-container-title">react-router-dom</p><ul><li>path 属性匹配路由，添加<strong>exact</strong>属性后<code>/detail</code>页面将不会加载 home 组件</li><li><strong>Route</strong>组件的 render 返回渲染内容（路由规则）</li><li>即根据路由的不同渲染不同的组件</li></ul></div><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BrowserRouter</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">exact</span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Home}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Route</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/detail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Detail}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Route</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>BrowserRouter</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="数据异步获取" tabindex="-1"><a class="header-anchor" href="#数据异步获取" aria-hidden="true">#</a> 数据异步获取</h2><div class="custom-container tip"><p class="custom-container-title">mapDispatch</p><ul><li>父组件通过<code>connect</code>方法连接 store，在父组件<code>dispatch</code>的 action，<strong>所有</strong>的子组件都能接收到</li><li><code>formJS</code>方法可以将普通对象转化为 immutableJS 对象，然后<code>set</code>更新 state</li><li><code>merge</code>方法同上可以执行多次的<code>set</code>操作</li><li>通过<strong>redux-thunk</strong>可以实现将异步请求放到 action 中管理，而不是在组件内</li></ul></div><h3 id="组件内的获取" tabindex="-1"><a class="header-anchor" href="#组件内的获取" aria-hidden="true">#</a> 组件内的获取</h3><ol><li>connect 方法连接 store</li><li>componentDidMount 时创建 action 派发给 reducer</li><li>reducer 根据 action.type 设置 immutableJS 数据返回</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// pages/home/index.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
			<span class="token comment">// JSX</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">changeHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">changeHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/api/home.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span>success<span class="token punctuation">,</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span>topicList<span class="token punctuation">,</span>articleList<span class="token punctuation">,</span>recommendList<span class="token punctuation">}</span> <span class="token operator">=</span> data
                <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;change_home_data&quot;</span><span class="token punctuation">,</span>
                    topicList<span class="token punctuation">,</span>
                    articleList<span class="token punctuation">,</span>
                    recommendList
                <span class="token punctuation">}</span>
                <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>mapDispatch<span class="token punctuation">)</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// reducer.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;immutable&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">topicList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">articleList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">recommendList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;change_home_data&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">topicList</span><span class="token operator">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>topicList<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">articleList</span><span class="token operator">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>articleList<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">recommendList</span><span class="token operator">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>recommendList<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="请求代码优化管理" tabindex="-1"><a class="header-anchor" href="#请求代码优化管理" aria-hidden="true">#</a> 请求代码优化管理</h3><div class="custom-container tip"><p class="custom-container-title">redux</p><ul><li>首先创建 action，派发给 reducer</li><li>reducer 获取 action，最后更新 state</li><li>actionCreators 管理 action 的创建</li><li>constants 管理 actionTypes</li><li>redux-thunk 能够实现 action 的创建返回一个函数（getHomeInfo 返回函数，函数内创建 action 然后派发）</li></ul></div><h4 id="组件-index" tabindex="-1"><a class="header-anchor" href="#组件-index" aria-hidden="true">#</a> 组件 index</h4><p>获取 actionCreators 方法创建 action，并且派发给 reducer</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> actionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token comment">// JSX</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">changeHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">changeHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> actionCreators<span class="token punctuation">.</span><span class="token function">getHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>mapDispatch<span class="token punctuation">)</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="actioncreators-1" tabindex="-1"><a class="header-anchor" href="#actioncreators-1" aria-hidden="true">#</a> actionCreators</h4><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">changeHomeData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> constants<span class="token punctuation">.</span><span class="token constant">CHANGE_HOME_DATA</span><span class="token punctuation">,</span>
  <span class="token literal-property property">topicList</span><span class="token operator">:</span> result<span class="token punctuation">.</span>topicList<span class="token punctuation">,</span>
  <span class="token literal-property property">articleList</span><span class="token operator">:</span> result<span class="token punctuation">.</span>articleList<span class="token punctuation">,</span>
  <span class="token literal-property property">recommendList</span><span class="token operator">:</span> result<span class="token punctuation">.</span>recommendList<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// !!!!!!!!!  redux-thunk</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getHomeInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/api/home.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> success<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      success <span class="token operator">&amp;&amp;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">changeHomeData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="constants" tabindex="-1"><a class="header-anchor" href="#constants" aria-hidden="true">#</a> constants</h4><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANGE_HOME_DATA</span> <span class="token operator">=</span> <span class="token string">&quot;home/CHANGE_HOME_DATA&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="index" tabindex="-1"><a class="header-anchor" href="#index" aria-hidden="true">#</a> index</h4><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">&quot;./reducer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> actionCreators <span class="token keyword">from</span> <span class="token string">&quot;./actionCreators&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span> reducer<span class="token punctuation">,</span> actionCreators<span class="token punctuation">,</span> constants <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="reducer" tabindex="-1"><a class="header-anchor" href="#reducer" aria-hidden="true">#</a> reducer</h4><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> fromJS <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;immutable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> constants <span class="token keyword">from</span> <span class="token string">&quot;./constants&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token function">fromJS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">topicList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">articleList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">recommendList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> constants<span class="token punctuation">.</span><span class="token constant">CHANGE_HOME_DATA</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">topicList</span><span class="token operator">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>topicList<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">articleList</span><span class="token operator">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>articleList<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">recommendList</span><span class="token operator">:</span> <span class="token function">fromJS</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>recommendList<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="页面路由参数获取" tabindex="-1"><a class="header-anchor" href="#页面路由参数获取" aria-hidden="true">#</a> 页面路由参数获取</h2><h3 id="params-参数" tabindex="-1"><a class="header-anchor" href="#params-参数" aria-hidden="true">#</a> params 参数</h3><ul><li><code>App.js</code>组件路由设置</li></ul><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/detail/:id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Detail}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Route</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>home 页面 List 组件添加<strong>参数跳转</strong></li></ul><div class="language-html ext-html"><pre class="language-html"><code>&lt;Link key={index} to={&quot;/detail/&quot; + item.get(&quot;id&quot;)}&gt;
	...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>detail 页面参数获取 <code>this.props.match.params.id</code></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="query-参数" tabindex="-1"><a class="header-anchor" href="#query-参数" aria-hidden="true">#</a> query 参数</h3><ul><li><code>App.js</code>组件路由<strong>无需设置</strong>特殊参数</li></ul><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Route</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/detail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{Detail}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Route</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>home 页面 List 组件添加<strong>参数跳转</strong></li></ul><div class="language-html ext-html"><pre class="language-html"><code>&lt;Link key={index} to={&quot;/detail?id=&quot; + item.get(&quot;id&quot;)}&gt;
	...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>参数获取<code>this.props.location.search</code>，需要自己<strong>再处理</strong>这个参数</li></ul><div class="language-text ext-text"><pre class="language-text"><code>?id=2
</code></pre></div><h2 id="异步组件加载" tabindex="-1"><a class="header-anchor" href="#异步组件加载" aria-hidden="true">#</a> 异步组件加载</h2><p>实现页面在访问某个路由页面的时候再加载<strong>对应的 js</strong>文件，减少首屏加载时间</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token operator">|</span>-- pages
<span class="token operator">|</span>   <span class="token operator">|</span>-- detail
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- store
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- index.js
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- loadable.js
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span>-- style.js
</code></pre></div><ul><li><h4 id="loadable-js" tabindex="-1"><a class="header-anchor" href="#loadable-js" aria-hidden="true">#</a> loadable.js</h4></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> Loadable <span class="token keyword">from</span> <span class="token string">&quot;react-loadable&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> LoadableComponent <span class="token operator">=</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>正在加载<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>LoadableComponent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><h4 id="withrouter" tabindex="-1"><a class="header-anchor" href="#withrouter" aria-hidden="true">#</a> withRouter</h4></li></ul><p><strong>detail 页面</strong>需要获取对应的文章 id，但是经过<strong>loadable</strong>处理返回后的组件已经无法再直接拿到参数，需要借助 react-router-dom 的<strong>withRouter</strong>包装返回</p><p><code>export default connect(mapState, mapDispatch)(withRouter(Detail));</code></p><h2 id="加载更多" tabindex="-1"><a class="header-anchor" href="#加载更多" aria-hidden="true">#</a> 加载更多</h2><ol><li>点击<strong>更多文字</strong>派发 action 异步获取下一页数据 （page 表示当前页页码，获取时增 1）</li><li>获取成功后派发 addHomeList 这个 action,reducer 接收后 concat 文章数据</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ListItem<span class="token punctuation">,</span> ListInfo<span class="token punctuation">,</span> LoadMore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../style&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> actionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> getMoreList<span class="token punctuation">,</span> page <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Link key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span> to<span class="token operator">=</span><span class="token string">&quot;/detail&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>ListItem<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>img className<span class="token operator">=</span><span class="token string">&quot;pic&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span> src<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;imgUrl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>ListInfo<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>h3 className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">&quot;desc&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;desc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>ListInfo<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>ListItem<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>LoadMore onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getMoreList</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>更多文字<span class="token operator">&lt;</span><span class="token operator">/</span>LoadMore<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token function">getIn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;articleList&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">page</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token function">getIn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;articlePage&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">getMoreList</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">getMoreList</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapState<span class="token punctuation">,</span> mapDispatch<span class="token punctuation">)</span><span class="token punctuation">(</span>List<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="actioncreators-2" tabindex="-1"><a class="header-anchor" href="#actioncreators-2" aria-hidden="true">#</a> actionCreators</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">addArticleList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">articleList</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;articleList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">articlePage</span><span class="token operator">:</span> action<span class="token punctuation">.</span>nextPage<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getMoreList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/homeList.json?page=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">addHomeList</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> page <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="reducer-1" tabindex="-1"><a class="header-anchor" href="#reducer-1" aria-hidden="true">#</a> reducer</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">addArticleList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">articleList</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;articleList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">articlePage</span><span class="token operator">:</span> action<span class="token punctuation">.</span>nextPage<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="回到顶部" tabindex="-1"><a class="header-anchor" href="#回到顶部" aria-hidden="true">#</a> 回到顶部</h2><ol><li>监听 window 的 scroll 事件，到达阈值显示回到顶部按钮</li><li>点击回到顶部执行 window.scrollTl(0,0)</li><li>componentWillUnmount 移除监听</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> <span class="token constant">HEAD</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Detail</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> content <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token constant">JSX</span><span class="token operator">...</span><span class="token operator">...</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token keyword">import</span> List <span class="token keyword">from</span> <span class="token string">&quot;./components/List&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Recommend <span class="token keyword">from</span> <span class="token string">&quot;./components/Recommend&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Writer <span class="token keyword">from</span> <span class="token string">&quot;./components/Writer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Topic <span class="token keyword">from</span> <span class="token string">&quot;./components/Topic&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HomeWrapper<span class="token punctuation">,</span> HomeLeft<span class="token punctuation">,</span> HomeRight<span class="token punctuation">,</span> BackTop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./style&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> actionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./store&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">handleScrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> showScroll <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>HomeWrapper<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>HomeLeft<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img
            className<span class="token operator">=</span><span class="token string">&quot;banner-img&quot;</span>
            alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
            src<span class="token operator">=</span><span class="token string">&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1592200833675&amp;di=6fc258493302450c75369d484e287e9b&amp;imgtype=0&amp;src=http%3A%2F%2Fattach.bbs.miui.com%2Fforum%2F201306%2F23%2F110328s72xxse7lfis9fnd.jpg&quot;</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Topic <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>List <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>HomeLeft<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>HomeRight<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Recommend <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Writer <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>HomeRight<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>showScroll <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>BackTop onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleScrollTop<span class="token punctuation">}</span><span class="token operator">&gt;</span>回到顶部<span class="token operator">&lt;</span><span class="token operator">/</span>BackTop<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>HomeWrapper<span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;</span> c126359de7417042a3f2a740f3802ed80315daa0
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> <span class="token constant">HEAD</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">getDetail</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">changeHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 滚动事件监听</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 移除事件</span>
    window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>changeScrollTopShow<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">bindEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>changeScrollTopShow<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;</span> c126359de7417042a3f2a740f3802ed80315daa0
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> <span class="token constant">HEAD</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapState<span class="token punctuation">,</span> mapDispatch<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">withRouter</span><span class="token punctuation">(</span>Detail<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
  <span class="token literal-property property">showScroll</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token function">getIn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;showScroll&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapDispatch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">changeHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">getHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">changeScrollTopShow</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 派发toggleTopShow</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">&gt;</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">toggleTopShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">toggleTopShow</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapState<span class="token punctuation">,</span> mapDispatch<span class="token punctuation">)</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="路由跳转" tabindex="-1"><a class="header-anchor" href="#路由跳转" aria-hidden="true">#</a> 路由跳转</h2><p>react 的单页面应用由<strong>react-router-dom</strong>实现路由的跳转，不会重新加载 html，只改变部分区域的显示</p><p><strong>Link</strong>组件实现链接</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>跳转到详情页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="purecomponent" tabindex="-1"><a class="header-anchor" href="#purecomponent" aria-hidden="true">#</a> PureComponent</h2><p>组件需要使用<code>shouldComponentUpdate</code>观察不需要重新渲染的 redux 数据，减少某些组件的不必要重新渲染</p><p>在使用了<code>immutable.js</code>下，我们只需要引入<strong>PureComponent</strong>代替原来的 Component 的 class 即可自动实现该功能</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ....</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;</span> c126359de7417042a3f2a740f3802ed80315daa0
</code></pre></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: sdp_518@126.com">Ahon-pan</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/my-blog/framework/react/redux.html" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/my-blog/assets/app.4bbb0959.js" defer></script>
  </body>
</html>
